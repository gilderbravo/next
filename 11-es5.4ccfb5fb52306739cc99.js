!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{GStY:function(e,n,a){"use strict";a.r(n),a.d(n,"QuatationModule",function(){return et});var o,c=a("ofXK"),r=a("tyNb"),s=a("PSD3"),l=a.n(s),b=a("fXoL"),d=a("0np6"),u=a("tk/3"),f=a("CFL1"),h=((o=function(){function e(i,n,a){t(this,e),this.http=i,this.router=n,this.userService=a}return i(e,[{key:"listQuatations",value:function(t,e,i,n,a,o,c,r){return this.http.get(d.b+"transaction/quatation?"+"page=".concat(t,"&size=").concat(e,"&order=").concat(i,"&asc=").concat(n)+(a.length>0?"&filter="+a:"")+(o.toString().length>0?"&dateinit="+o:"")+(c.toString().length>0?"&dateend="+c:""),this.userService.getHeaderAuth())}},{key:"deleteQuatation",value:function(t){var e=this;this.http.get(d.b+"transaction/delete/"+t,this.userService.getHeaderAuth()).subscribe({next:function(t){return l.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"Se Elimino la cotizacion "}),e.router.navigate(["/quatations"])},error:function(t){return console.error("There was an error!",t)}})}},{key:"saveQuatation",value:function(t){return this.http.post(d.b+"transaction/savequatation",t,this.userService.getHeaderAuth())}}]),e}()).\u0275fac=function(t){return new(t||o)(b.cc(u.b),b.cc(r.e),b.cc(f.a))},o.\u0275prov=b.Lb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),p=a("/67R"),m=a("NCuw"),v=a("3Pt+"),g=a("K7Ed"),y=a("LjSU"),V=a("Rm4T"),U=a("B+r4"),z=a("3+qR"),w=a("OzZK"),M=a("RwU8"),S=a("C2AL"),k=a("FwiY"),B=a("0lU3"),C=a("iAHN"),j=a("zAKX"),H=a("nkYO"),P=function(){return{standalone:!0}};function F(t,e){if(1&t){var i=b.Wb();b.Vb(0,"div",13),b.Vb(1,"div",32),b.Vb(2,"input",23),b.fc("ngModelChange",function(t){return e.$implicit.product=t}),b.Ub(),b.Ub(),b.Vb(3,"div",33),b.Vb(4,"input",34),b.fc("ngModelChange",function(t){return e.$implicit.amount=t})("blur",function(){return b.yc(i),b.ic().calculateTotal()}),b.Ub(),b.Ub(),b.Vb(5,"div",35),b.Vb(6,"input",36),b.fc("ngModelChange",function(t){return e.$implicit.unitpricesale=t})("blur",function(){return b.yc(i),b.ic().calculateTotal()}),b.Ub(),b.Ub(),b.Vb(7,"div",37),b.Hc(8),b.jc(9,"currency"),b.Ub(),b.Vb(10,"div",38),b.Vb(11,"button",39),b.fc("click",function(){b.yc(i);var t=e.$implicit,n=e.index;return b.ic().removeDetail(t,n)}),b.Qb(12,"i",40),b.Ub(),b.Ub(),b.Ub()}if(2&t){var n=e.$implicit;b.Bb(2),b.oc("ngModel",n.product)("ngModelOptions",b.rc(10,P)),b.Bb(2),b.oc("ngModel",n.amount)("ngModelOptions",b.rc(11,P)),b.Bb(2),b.oc("ngModel",n.unitpricesale)("ngModelOptions",b.rc(12,P)),b.Bb(2),b.Ic(b.lc(9,7,n.totalmoney,"S/"))}}function x(t,e){if(1&t&&b.Qb(0,"nz-option",41),2&t){var i=e.$implicit;b.oc("nzValue",i.employedid)("nzLabel",i.businessname)}}function I(t,e){if(1&t&&(b.Vb(0,"div"),b.Qb(1,"app-sale-ticket",42),b.Ub()),2&t){var i=b.ic();b.Bb(1),b.oc("transaction",i.transactionprint)("viewUsing","quatationview")("viewreturn","/quatations")("isVisible",i.showprintsale)}}var D,T=function(){return["dd/MM/yyyy"]},Q=function(t){return["/clients","new",t]},O=((D=function(){function e(i,n,a,o,c,r,s,l,b,d,u){var f=this;t(this,e),this.quatationService=i,this.datepipe=n,this.userService=a,this.clientService=o,this.saleService=c,this.formBuilder=r,this.businessobjectService=b,this.settingsService=d,this.i18n=u,this.employeds=[],this.load=!0,this.isSubmitted=!1,this.identitynumberdoc="",this.subjectrolid=1,this.configurationUser={},this.transactionprint={},this.viewpay=!1,this.showprintsale=!1,this.transaction={email:"",details:[],total:0,employedid:this.userService.employedid,dateinit:new Date},l.params.subscribe(function(t){f.id=t.id,f.identitynumberdoc=t.identitynumber,f.vouchertypeid=t.vouchertypeid,"new"!==f.id&&f.loadQuatations(f.id)})}return i(e,[{key:"ngOnInit",value:function(){this.validateFormGroup(),this.listEmployeds()}},{key:"validateFormGroup",value:function(){this.form=this.formBuilder.group({})}},{key:"save",value:function(){var t=this;if(this.isSubmitted=!0,!this.form.invalid){if(this.transaction.dateinit&&this.stringDateformatDDMMYY(this.transaction.dateinit),this.transaction.details.length<=0)return alertify.error("No Tiene Detalles... "),void(this.isSubmitted=!1);this.quatationService.saveQuatation(this.transaction).subscribe({next:function(e){t.transaction.date=t.transaction.startdate,t.transaction.code=e.code,t.transaction.subject=t.transaction.businessname,t.transactionprint=t.transaction,l.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"Se Guardo la Cotizacion"}),t.transaction.email!=t.client.email&&(t.client.email=t.transaction.email,t.client.startdate=t.datepipe.transform(t.client.startdate,"dd/MM/yyyy HH:mm:ss"),t.client.subjectrolid=1,null!=t.client.identitydocument&&(t.client.identitydocumentid=t.client.identitydocument.id,t.client.rateid=t.client.rate.id,t.client.subjectid=t.client.subject.id,t.client.subjecttypeid=t.client.subject.subjecttype.id,t.client.subjectrolcategoryid=t.client.subjectrolcategory.id),t.clientService.saveDirectClient(t.client).subscribe(function(t){alertify.success("Se Actualizo correctamente el correo")},function(t){console.log(t)})),t.showprintsale=!0},error:function(t){return console.error("There was an error!",t)}})}}},{key:"stringDateformatDDMMYY",value:function(t){this.transaction.startdate=this.datepipe.transform(t,"dd/MM/yyyy HH:mm:ss")}},{key:"loadQuatations",value:function(t){var e=this;this.saleService.loadSale(t).subscribe(function(t){e.transaction=t,e.transaction.dateinit=new Date(t.date),e.calculateTotal()})}},{key:"selectClientChange",value:function(t){this.transaction.externalsubjectid=t.externalsubjectid,this.transaction.vouchertypeid=t.vouchertypeid,this.transaction.businessname=t.client.subject,this.transaction.address=t.client.address,this.transaction.identitynumber=t.client.identitynumber,this.transaction.email=t.client.email,this.client=t.client}},{key:"removeDetail",value:function(t,e){t.id>0&&this.transaction.detailsremove.push(t),this.transaction.details.splice(e,1),this.calculateTotal()}},{key:"onProductClick",value:function(t){1==this.userService.setting.includedigv&&null!=this.transaction.details.find(function(e){return e.businessobjectdetailid==t.businessobjectdetailid})?(this.transaction.details.forEach(function(e){e.businessobjectdetailid==t.businessobjectdetailid&&(e.amount=1*e.amount+1)}),this.calculateTotal()):this.addProductToDetails(t)}},{key:"addProductToDetails",value:function(t){var e=Object.assign({},t);e.unitpricereal=e.unitpricesale;var i=new Date;new Date(i.getFullYear(),i.getMonth(),1),new Date(i.getFullYear(),i.getMonth()+1,0),this.transaction.details.push({comment:"",amount:1,unitmeasure:e.unitmeasure,product:e.nameconcat,stock:e.stock,businessobjectid:e.businessobjectid,businessobjectdetailid:e.businessobjectdetailid,valuedbusinessobjectid:e.valuedbusinessobjectid,unitpricesale:e.unitpricesale,unitpricereal:e.unitpricereal,totalmoney:e.unitpricesale,subtransactionid:0,subtransactionorderid:0,nameobjectrole:e.nameobjectrole,id:0,unitpricepurchase:e.unitprice,operationaffectedid:null!=e.operationaffectedid?e.operationaffectedid:10,minimalPrice:e.minimalPrice,convertautomatic:e.convertautomatic,stockTemp:e.stockTemp,code:e.code}),this.calculateTotal()}},{key:"addProductToDetailsbasic",value:function(){var t=new Date;new Date(t.getFullYear(),t.getMonth(),1),new Date(t.getFullYear(),t.getMonth()+1,0),this.transaction.details.push({comment:"",amount:1,unitmeasure:"NIU",product:"",stock:0,businessobjectid:1,businessobjectdetailid:1,valuedbusinessobjectid:1,unitpricesale:0,unitpricereal:0,totalmoney:0,subtransactionid:0,subtransactionorderid:0,nameobjectrole:"Servicio",id:0,unitpricepurchase:0,operationaffectedid:30,minimalPrice:0,stockTemp:0,code:""}),this.calculateTotal()}},{key:"calculateTotal",value:function(){this.transaction.neto=0,this.transaction.total=0;for(var t=0,e=this.transaction.details,i=0;i<e.length;i++)e[i].totalmoney=e[i].amount*e[i].unitpricesale,e[i].amount,e[i].unitpricesale,t+=e[i].totalmoney,e[i].total=e[i].totalmoney;this.transaction.neto=0==this.userService.setting.includedigv?t:t/(1*this.userService.igv.valor+1),this.transaction.igv=0==this.userService.setting.includedigv||0==this.transaction.applytax?0:this.transaction.neto*this.userService.igv.valor,this.transaction.total=this.transaction.neto+this.transaction.igv,this.transaction.total=Math.round(100*this.transaction.total)/100,this.transaction.neto=Math.round(100*this.transaction.neto)/100,this.transaction.igv=Math.round(100*this.transaction.igv)/100}},{key:"listEmployeds",value:function(){var t=this;this.load=!0,this.settingsService.listEployed().subscribe(function(e){t.employeds=e})}},{key:"f",get:function(){return this.form.controls}}]),e}()).\u0275fac=function(t){return new(t||D)(b.Pb(h),b.Pb(c.f),b.Pb(f.a),b.Pb(p.a),b.Pb(m.a),b.Pb(v.d),b.Pb(r.e),b.Pb(r.a),b.Pb(g.a),b.Pb(y.a),b.Pb(V.e))},D.\u0275cmp=b.Jb({type:D,selectors:[["app-quatation"]],decls:88,vars:61,consts:[[1,"container-mobile"],[1,"flex1-mobile"],[1,"card"],[3,"nzSpan"],[3,"product"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","plus-circle","nzTheme","twotone"],[1,"wrapper-mobile"],[1,"table-mobile"],[1,"row-mobile","header-green"],[1,"cell-mobile"],[1,"cell-mobile","detail-amount"],["class","row-mobile",4,"ngFor","ngForOf"],[1,"row-mobile"],[1,"cell-mobile","texto","btn-primary"],[1,"flex2-mobile"],["nz-form","",3,"formGroup"],[1,"padding-add"],[3,"nzSm","nzXs"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[3,"nzFormat","ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-primary","btn-xs","waves-effect","waves-light","m-r-10",3,"routerLink"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[3,"identitynumber","subjectrolid","vouchertypeid","subjectrolcategoryid","transactionclient"],["type","email",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"floating-button",2,"text-align","center"],["type","button",1,"btn","btn-success","waves-effect","waves-light","m-r-10",3,"disabled","click"],["routerLink","/contracts",1,"btn","btn-inverse","waves-effect","waves-light"],[4,"ngIf"],["data-title","Descripcion",1,"cell-mobile"],["data-title","Cantidad",1,"cell-mobile"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","blur"],["data-title","Precio",1,"cell-mobile"],["data-plus-as-tab","true","type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","blur"],["data-title","Sub Total",1,"cell-mobile"],[1,"cell-mobile",2,"width","120px"],[1,"btn","btn-danger","btn-xs",3,"click"],[1,"fa","fa-trash"],[3,"nzValue","nzLabel"],[3,"transaction","viewUsing","viewreturn","isVisible"]],template:function(t,e){1&t&&(b.Vb(0,"div",0),b.Vb(1,"div",1),b.Vb(2,"div",2),b.Vb(3,"nz-form-item"),b.Vb(4,"nz-form-control",3),b.Vb(5,"app-list-product",4),b.fc("product",function(t){return e.onProductClick(t)}),b.Ub(),b.Ub(),b.Vb(6,"nz-form-control",3),b.Vb(7,"button",5),b.fc("click",function(){return e.addProductToDetailsbasic()}),b.Qb(8,"i",6),b.Ub(),b.Ub(),b.Ub(),b.Vb(9,"div",7),b.Vb(10,"div",8),b.Vb(11,"div",9),b.Vb(12,"div",10),b.Hc(13,"Descripcion"),b.Ub(),b.Vb(14,"div",11),b.Hc(15,"Cantidad"),b.Ub(),b.Vb(16,"div",11),b.Hc(17,"Precio"),b.Ub(),b.Vb(18,"div",10),b.Hc(19,"Sub Total"),b.Ub(),b.Vb(20,"div",10),b.Hc(21,"Accion"),b.Ub(),b.Ub(),b.Fc(22,F,13,13,"div",12),b.Vb(23,"div",13),b.Qb(24,"div",10),b.Qb(25,"div",10),b.Qb(26,"div",10),b.Vb(27,"div",10),b.Hc(28," SubTotal"),b.Ub(),b.Vb(29,"div",10),b.Hc(30),b.jc(31,"currency"),b.Ub(),b.Ub(),b.Vb(32,"div",13),b.Qb(33,"div",10),b.Qb(34,"div",10),b.Qb(35,"div",10),b.Vb(36,"div",10),b.Hc(37," IGV "),b.Ub(),b.Vb(38,"div",10),b.Hc(39),b.jc(40,"currency"),b.Ub(),b.Ub(),b.Vb(41,"div",13),b.Qb(42,"div",10),b.Qb(43,"div",10),b.Qb(44,"div",10),b.Vb(45,"div",14),b.Hc(46," TOTAL"),b.Ub(),b.Vb(47,"div",14),b.Hc(48),b.jc(49,"currency"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(50,"div",15),b.Vb(51,"form",16),b.Vb(52,"div",2),b.Vb(53,"nz-form-item",17),b.Vb(54,"nz-form-label",18),b.Hc(55,"Fecha"),b.Ub(),b.Vb(56,"nz-form-control",18),b.Vb(57,"div",19),b.Vb(58,"div",20),b.Vb(59,"nz-date-picker",21),b.fc("ngModelChange",function(t){return e.transaction.dateinit=t}),b.Ub(),b.Ub(),b.Vb(60,"div",20),b.Vb(61,"button",22),b.Hc(62,"Nuevo Cliente"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(63,"nz-form-item",17),b.Vb(64,"nz-form-label",18),b.Hc(65,"Opcional"),b.Ub(),b.Vb(66,"nz-form-control",18),b.Vb(67,"input",23),b.fc("ngModelChange",function(t){return e.transaction.subject=t}),b.Ub(),b.Ub(),b.Ub(),b.Vb(68,"nz-form-item",17),b.Vb(69,"nz-form-control",18),b.Vb(70,"app-select-person",24),b.fc("transactionclient",function(t){return e.selectClientChange(t)}),b.Ub(),b.Ub(),b.Ub(),b.Vb(71,"nz-form-item",17),b.Vb(72,"nz-form-label",18),b.Hc(73,"Correo"),b.Ub(),b.Vb(74,"nz-form-control",18),b.Vb(75,"input",25),b.fc("ngModelChange",function(t){return e.transaction.email=t}),b.Ub(),b.Ub(),b.Ub(),b.Vb(76,"nz-form-item",17),b.Vb(77,"nz-form-label",18),b.Hc(78,"Vendedor"),b.Ub(),b.Vb(79,"nz-form-control",18),b.Vb(80,"nz-select",26),b.fc("ngModelChange",function(t){return e.transaction.employedid=t}),b.Fc(81,x,1,2,"nz-option",27),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(82,"div",28),b.Vb(83,"button",29),b.fc("click",function(){return e.save()}),b.Hc(84,"Guardar"),b.Ub(),b.Vb(85,"button",30),b.Hc(86,"Salir"),b.Ub(),b.Ub(),b.Fc(87,I,2,4,"div",31),b.Ub()),2&t&&(b.Bb(4),b.oc("nzSpan",23),b.Bb(2),b.oc("nzSpan",1),b.Bb(16),b.oc("ngForOf",e.transaction.details),b.Bb(8),b.Jc(" ",b.lc(31,45,e.transaction.neto,"S/"),""),b.Bb(9),b.Jc(" ",b.lc(40,48,e.transaction.igv,"S/")," "),b.Bb(9),b.Jc(" ",b.lc(49,51,e.transaction.total,"S/"),""),b.Bb(3),b.oc("formGroup",e.form),b.Bb(3),b.oc("nzSm",6)("nzXs",24),b.Bb(2),b.oc("nzSm",14)("nzXs",24),b.Bb(1),b.oc("nzGutter",8),b.Bb(1),b.oc("nzSpan",16),b.Bb(1),b.oc("nzFormat",b.rc(54,T))("ngModel",e.transaction.dateinit)("ngModelOptions",b.rc(55,P)),b.Bb(1),b.oc("nzSpan",6),b.Bb(1),b.oc("routerLink",b.sc(56,Q,"quatations/"+e.id+"/"+e.identitynumberdoc+"/"+e.vouchertypeid)),b.Bb(3),b.oc("nzSm",6)("nzXs",24),b.Bb(2),b.oc("nzSm",14)("nzXs",24),b.Bb(1),b.oc("ngModel",e.transaction.subject)("ngModelOptions",b.rc(58,P)),b.Bb(2),b.oc("nzSm",24)("nzXs",24),b.Bb(1),b.oc("identitynumber",e.identitynumberdoc)("subjectrolid",e.subjectrolid)("vouchertypeid",e.vouchertypeid)("subjectrolcategoryid",2),b.Bb(2),b.oc("nzSm",6)("nzXs",24),b.Bb(2),b.oc("nzSm",14)("nzXs",24),b.Bb(1),b.oc("ngModel",e.transaction.email)("ngModelOptions",b.rc(59,P)),b.Bb(2),b.oc("nzSm",6)("nzXs",24),b.Bb(2),b.oc("nzSm",14)("nzXs",24),b.Bb(1),b.oc("ngModel",e.transaction.employedid)("ngModelOptions",b.rc(60,P)),b.Bb(1),b.oc("ngForOf",e.employeds),b.Bb(2),b.oc("disabled",e.isSubmitted),b.Bb(4),b.oc("ngIf",e.showprintsale))},directives:[U.c,U.a,z.a,w.a,M.a,S.a,k.b,c.n,v.x,v.n,v.h,B.a,v.m,v.p,r.f,v.c,C.a,j.b,c.o,j.a,H.a],pipes:[c.d],encapsulation:2}),D),L=a("1kSV"),E=a("ed8r");function q(t,e){1&t&&(b.Vb(0,"div",2),b.Vb(1,"div",3),b.Vb(2,"div",4),b.Vb(3,"strong"),b.Hc(4,"Cargando"),b.Ub(),b.Qb(5,"br"),b.Qb(6,"i",5),b.Qb(7,"br"),b.Vb(8,"span"),b.Hc(9,"Por Favor Espere"),b.Ub(),b.Ub(),b.Ub(),b.Ub())}function X(t,e){1&t&&(b.Vb(0,"div",2),b.Vb(1,"div",3),b.Vb(2,"div",6),b.Vb(3,"span"),b.Hc(4,"Caja Cerrada. "),b.Ub(),b.Vb(5,"span"),b.Hc(6,"Para generar un comprobante debe aperturar su caja"),b.Ub(),b.Ub(),b.Ub(),b.Ub())}var Y=function(t,e,i){return[t,e,i]};function A(t,e){if(1&t&&(b.Vb(0,"button",38),b.Qb(1,"i",39),b.Ub()),2&t){var i=b.ic().$implicit;b.oc("routerLink",b.uc(1,Y,i.subtransactionid,i.identitynumber,i.vouchertypeid))}}function G(t,e){if(1&t){var i=b.Wb();b.Vb(0,"button",40),b.fc("click",function(){b.yc(i);var t=b.ic().$implicit;return b.ic(2).prepareDelete(t)}),b.Qb(1,"i",41),b.Ub()}}function N(t,e){if(1&t&&(b.Vb(0,"div",28),b.Vb(1,"div",29),b.Fc(2,A,2,5,"button",30),b.Fc(3,G,2,0,"button",31),b.Ub(),b.Vb(4,"div",32),b.Hc(5),b.Ub(),b.Vb(6,"div",33),b.Hc(7),b.Ub(),b.Vb(8,"div",34),b.Hc(9),b.Ub(),b.Vb(10,"div",35),b.Hc(11),b.Ub(),b.Vb(12,"div",36),b.Hc(13),b.jc(14,"currency"),b.Ub(),b.Vb(15,"div",37),b.Hc(16),b.Ub(),b.Ub()),2&t){var i=e.$implicit,n=b.ic(2);b.Bb(2),b.oc("ngIf",n.salesService.statusCashbox),b.Bb(1),b.oc("ngIf",n.salesService.statusCashbox),b.Bb(2),b.Ic(i.code),b.Bb(2),b.Ic(i.vouchertype),b.Bb(2),b.Ic(i.date),b.Bb(2),b.Ic(""!=i.subject?i.subject:i.name),b.Bb(2),b.Ic(b.lc(14,8,i.total,"S/")),b.Bb(3),b.Ic(i.states)}}function $(t,e){if(1&t){var i=b.Wb();b.Vb(0,"ngb-pagination",42),b.fc("pageChange",function(t){return b.yc(i),b.ic(2).page=t})("pageChange",function(t){return b.yc(i),b.ic(2).loadPage(t)}),b.Ub()}if(2&t){var n=b.ic(2);b.oc("collectionSize",n.totalItems)("page",n.page)}}var J=function(){return["new","11111111","4"]};function R(t,e){if(1&t){var i=b.Wb();b.Vb(0,"div"),b.Vb(1,"div",7),b.Vb(2,"div",8),b.Vb(3,"label",9),b.Hc(4,"Fecha Inicio"),b.Ub(),b.Vb(5,"div",10),b.Vb(6,"ejs-datetimepicker",11),b.fc("ngModelChange",function(t){return b.yc(i),b.ic().dateinit=t}),b.Ub(),b.Ub(),b.Vb(7,"label",12),b.Hc(8,"Fecha Final"),b.Ub(),b.Vb(9,"div",10),b.Vb(10,"ejs-datetimepicker",13),b.fc("ngModelChange",function(t){return b.yc(i),b.ic().dateend=t}),b.Ub(),b.Ub(),b.Vb(11,"div",14),b.Vb(12,"button",15),b.Qb(13,"i",16),b.Hc(14," Nuevo Cotizacion "),b.Ub(),b.Ub(),b.Ub(),b.Vb(15,"div",8),b.Vb(16,"input",17,18),b.fc("keyup.enter",function(){b.yc(i);var t=b.xc(17);return b.ic().search(t.value)}),b.Ub(),b.Vb(18,"div",12),b.Vb(19,"button",19),b.fc("click",function(){b.yc(i);var t=b.xc(17);return b.ic().search(t.value)}),b.Hc(20,"Buscar"),b.Ub(),b.Ub(),b.Ub(),b.Vb(21,"h3",20),b.Hc(22,"Cotizaciones Registradas ("),b.Vb(23,"small"),b.Hc(24),b.Ub(),b.Hc(25,")"),b.Ub(),b.Vb(26,"div",21),b.Vb(27,"div",22),b.Vb(28,"div",23),b.Vb(29,"div",24),b.Hc(30,"Accion"),b.Ub(),b.Vb(31,"div",24),b.Hc(32,"Documento"),b.Ub(),b.Vb(33,"div",24),b.Hc(34,"Tipo"),b.Ub(),b.Vb(35,"div",24),b.Hc(36,"Fecha"),b.Ub(),b.Vb(37,"div",24),b.Hc(38,"Cliente"),b.Ub(),b.Vb(39,"div",24),b.Hc(40,"Total"),b.Ub(),b.Vb(41,"div",24),b.Hc(42,"Estado"),b.Ub(),b.Ub(),b.Fc(43,N,17,11,"div",25),b.Ub(),b.Ub(),b.Vb(44,"div",26),b.Fc(45,$,1,2,"ngb-pagination",27),b.Ub(),b.Ub(),b.Ub()}if(2&t){var n=b.ic();b.Bb(6),b.oc("ngModel",n.dateinit),b.Bb(4),b.oc("ngModel",n.dateend),b.Bb(2),b.oc("routerLink",b.rc(6,J)),b.Bb(12),b.Ic(n.totalItems),b.Bb(19),b.oc("ngForOf",n.transactions),b.Bb(2),b.oc("ngIf",n.showPagination)}}var K,W,Z,_=[{path:"",component:(K=function(){function e(i,n,a,o,c){t(this,e),this.ngbPaginationConfig=i,this.salesService=n,this.quatationService=a,this.datepipe=o,this.userService=c,this.today=new Date,this.dateinit=new Date(this.today.getFullYear(),this.today.getMonth()),this.dateend=new Date(this.today.getFullYear(),this.today.getMonth()+1,0),this.totalItems=0,this.page=1,this.previousPage=1,this.showPagination=!0,this.size=10,this.order="id",this.filter="",this.asc=!0,this.load=!0,this.ngbPaginationConfig.boundaryLinks=!0}return i(e,[{key:"ngOnInit",value:function(){this.list(this.page-1)}},{key:"list",value:function(t){var e=this;this.load=!0,this.quatationService.listQuatations(t,this.size,this.order,this.asc,this.filter,this.datepipe.transform(this.dateinit,"dd/MM/yyyy"),this.datepipe.transform(this.dateend,"dd/MM/yyyy"),this.userService.subsidiaryid).subscribe(function(t){e.totalItems=t.totalElements,e.showPagination=!0,e.transactions=t.content,e.load=!1})}},{key:"loadPage",value:function(t){t!==this.previousPage&&(this.previousPage=t,this.list(this.page-1))}},{key:"search",value:function(t){this.filter=t,this.previousPage=1,this.page=1,this.filter.length<=0&&(this.filter=""),this.list(0)}},{key:"prepareDelete",value:function(t){var e=this;swal({title:"Esta Seguro?",text:"Esta a punto de Borrar la cotizacion "+t.code,icon:"warning",buttons:!0,dangerMode:!0}).then(function(i){i&&(e.quatationService.deleteQuatation(t.subtransactionid),e.previousPage=1,e.page=1,e.list(0))})}}]),e}(),K.\u0275fac=function(t){return new(t||K)(b.Pb(L.c),b.Pb(m.a),b.Pb(h),b.Pb(c.f),b.Pb(f.a))},K.\u0275cmp=b.Jb({type:K,selectors:[["app-quatations"]],decls:3,vars:3,consts:[["class","row animated fadeIn",4,"ngIf"],[4,"ngIf"],[1,"row","animated","fadeIn"],[1,"col-sm-12"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-refresh","fa-spin","fa-2x"],[1,"alert","alert-danger","text-center"],[1,"card",2,"padding","2px"],[1,"col-md-12","row"],["col-md-2",""],[1,"col-md-3","form-group"],["id","dateinit","placeholder","Select a datetime ","format","dd/MM/yyyy",3,"ngModel","ngModelChange"],[1,"col-md-2"],["id","dateend","placeholder","Select a datetime ","format","dd/MM/yyyy",3,"ngModel","ngModelChange"],[1,"text-right","col-md-2"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"routerLink"],[1,"fa","fa-plus"],["type","text","placeholder","Buscar",1,"col-md-9","form-control",3,"keyup.enter"],["input",""],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10",3,"click"],[1,"card-title"],[1,"wrapper-mobile"],[1,"table-mobile"],[1,"row-mobile","header-mobile"],[1,"cell-mobile"],["class","row-mobile",4,"ngFor","ngForOf"],[2,"position","relative","left","30%"],[3,"collectionSize","page","pageChange",4,"ngIf"],[1,"row-mobile"],[1,"cell-mobile",2,"width","180px"],["title","Editar cotizacion","class","btn btn-primary btn-xs waves-effect waves-light m-r-10",3,"routerLink",4,"ngIf"],["title","Eliminar Cotizacion","class","btn btn-danger btn-xs waves-effect waves-light m-r-10",3,"click",4,"ngIf"],["data-title","Documento",1,"cell-mobile"],["data-title","Tipo",1,"cell-mobile"],["data-title","Fecha",1,"cell-mobile"],["data-title","Cliente",1,"cell-mobile"],["data-title","Total",1,"cell-mobile"],["data-title","Estado",1,"cell-mobile"],["title","Editar cotizacion",1,"btn","btn-primary","btn-xs","waves-effect","waves-light","m-r-10",3,"routerLink"],[1,"fa","fa-edit"],["title","Eliminar Cotizacion",1,"btn","btn-danger","btn-xs","waves-effect","waves-light","m-r-10",3,"click"],[1,"fa","fa-trash"],[3,"collectionSize","page","pageChange"]],template:function(t,e){1&t&&(b.Fc(0,q,10,0,"div",0),b.Fc(1,X,7,0,"div",0),b.Fc(2,R,46,7,"div",1)),2&t&&(b.oc("ngIf",e.load),b.Bb(1),b.oc("ngIf",0==e.salesService.statusCashbox),b.Bb(1),b.oc("ngIf",!e.load))},directives:[c.o,E.a,v.m,v.p,r.f,c.n,L.b],pipes:[c.d],styles:[""]}),K),data:{title:"Listado Cotizaciones"}},{path:":id/:identitynumber/:vouchertypeid",component:O,data:{title:"Cotizacion"}}],tt=((Z=function e(){t(this,e)}).\u0275mod=b.Nb({type:Z}),Z.\u0275inj=b.Mb({factory:function(t){return new(t||Z)},imports:[[r.i.forChild(_)],r.i]}),Z),et=((W=function e(){t(this,e)}).\u0275mod=b.Nb({type:W}),W.\u0275inj=b.Mb({factory:function(t){return new(t||W)},imports:[[c.c,tt]]}),W)}}])}();