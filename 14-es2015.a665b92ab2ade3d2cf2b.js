(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{YAKK:function(t,i,e){"use strict";e.r(i),e.d(i,"RestaurantModule",function(){return W});var n=e("ofXK"),a=e("tyNb"),s=e("R4wn"),c=e("PSD3"),o=e.n(c),r=e("fXoL"),l=e("/67R"),d=e("CFL1"),b=e("KWTU"),u=e("K7Ed"),h=e("hXFv"),p=e("B+r4"),m=e("iAHN"),g=e("3Pt+"),f=e("MutI"),v=e("C2AL"),y=e("FwiY"),V=e("PTRe"),x=e("TQKw"),U=e("dEAy"),C=e("OzZK"),P=e("RwU8"),z=e("m1XX");function O(t,i){if(1&t&&(r.Vb(0,"div",9),r.Vb(1,"div",10),r.Vb(2,"p",11),r.Hc(3),r.Ub(),r.Ub(),r.Vb(4,"div",12),r.Vb(5,"p",11),r.Hc(6),r.Ub(),r.Ub(),r.Vb(7,"div",13),r.Vb(8,"p",11),r.Hc(9),r.jc(10,"currency"),r.Ub(),r.Ub(),r.Vb(11,"div",14),r.Vb(12,"p",11),r.Hc(13),r.jc(14,"currency"),r.Ub(),r.Ub(),r.Ub()),2&t){const t=i.$implicit;r.Bb(3),r.Ic(t.amount),r.Bb(3),r.Kc("",t.product," "," "+t.comment,""),r.Bb(3),r.Ic(r.lc(10,5,t.unitpricesale,"S/")),r.Bb(4),r.Ic(r.lc(14,8,t.totalmoney,"S/"))}}function S(t,i){if(1&t&&(r.Vb(0,"div",3),r.Vb(1,"div",4),r.Vb(2,"div",5),r.Vb(3,"p",6),r.Vb(4,"strong"),r.Hc(5),r.Ub(),r.Ub(),r.Qb(6,"p",7),r.Vb(7,"p",8),r.Hc(8),r.Ub(),r.Vb(9,"p",8),r.Hc(10),r.Ub(),r.Vb(11,"p",8),r.Hc(12),r.Ub(),r.Qb(13,"p",7),r.Ub(),r.Vb(14,"div",5),r.Vb(15,"div",9),r.Vb(16,"div",10),r.Vb(17,"p",11),r.Hc(18,"C."),r.Ub(),r.Ub(),r.Vb(19,"div",12),r.Vb(20,"p",11),r.Hc(21,"Detalle"),r.Ub(),r.Ub(),r.Vb(22,"div",13),r.Vb(23,"p",11),r.Hc(24,"P.U"),r.Ub(),r.Ub(),r.Vb(25,"div",14),r.Vb(26,"p",11),r.Hc(27,"Imp."),r.Ub(),r.Ub(),r.Ub(),r.Qb(28,"p",15),r.Fc(29,O,15,11,"div",16),r.Qb(30,"p",15),r.Vb(31,"div",9),r.Vb(32,"div",17),r.Vb(33,"p",18),r.Hc(34,"TOTAL ORDEN:"),r.Ub(),r.Ub(),r.Vb(35,"div",19),r.Vb(36,"p",18),r.Hc(37),r.jc(38,"currency"),r.Ub(),r.Ub(),r.Ub(),r.Qb(39,"p",7),r.Vb(40,"p",20),r.Hc(41),r.Ub(),r.Qb(42,"p",7),r.Ub(),r.Ub(),r.Ub()),2&t){const t=r.ic();r.Bb(5),r.Ic("N\xb0 ORDEN : "+t.transaction.code!=null?t.transaction.code:t.transaction.pnumber),r.Bb(3),r.Jc("Mesa: ",t.transaction.resouce,""),r.Bb(2),r.Jc("Fecha: ",t.transaction.startdate,""),r.Bb(2),r.Jc("Mozo: ",t.transaction.employed,""),r.Bb(17),r.oc("ngForOf",t.transaction.details),r.Bb(8),r.Jc(" ",r.lc(38,7,t.transaction.total,"S/"),""),r.Bb(4),r.Jc("SON: ",1==t.transaction.freesale?"TRANSFERENCIA GRATUITA":t.transaction.numbertext,"")}}function w(t,i){if(1&t){const t=r.Wb();r.Vb(0,"button",21),r.fc("click",function(){return r.yc(t),r.ic().handleOk("invoice-document")}),r.Hc(1,"Imprimir"),r.Ub(),r.Vb(2,"button",22),r.fc("click",function(){return r.yc(t),r.ic().handleCancel()}),r.Hc(3,"Salir"),r.Ub()}}const M=function(){return{width:"380px",top:"5px"}};let B=(()=>{class t{constructor(t,i,e){this.router=t,this.userService=i,this.orderService=e,this.size="small",this.qrdata=null,this.isdirectprint=!1,this.transaction={details:[]},this.isVisible=!1}ngOnInit(){console.log(this.transaction),console.log(this.isVisible),this.isdirectprint=!0,this.qrdata="nextfuture",this.isVisible=!0,this.transaction.employed=this.orderService.headerOrder.employed,this.transaction.resouce=this.orderService.headerOrder.name,this.calculateTotal()}handleCancel(){if(this.isVisible=!1,this.isdirectprint)return this.router.navigate(["/restaurant"])}handleOk(t){if(this.isVisible=!1,this.isdirectprint)return this.router.navigate(["/restaurant"])}calculateTotal(){this.transaction.neto=0,this.transaction.total=0;let t=0,i=0,e=this.transaction.details;for(let n=0;n<e.length;n++)e[n].totalmoney=e[n].amount*e[n].unitpricesale,i+=e[n].amount*e[n].unitpricesale,t+=e[n].totalmoney,e[n].total=e[n].totalmoney;this.transaction.neto=0==this.userService.setting.includedigv?t:t/(1*this.userService.igv.valor+1),this.transaction.igv=0==this.userService.setting.includedigv||0==this.transaction.applytax?0:this.transaction.neto*this.userService.igv.valor,this.transaction.total=this.transaction.neto+this.transaction.igv,this.transaction.total=Math.round(100*this.transaction.total)/100,this.transaction.neto=Math.round(100*this.transaction.neto)/100,this.transaction.igv=Math.round(100*this.transaction.igv)/100,this.transaction.numbertext=numeroALetras(this.transaction.total,{plural:"SOLES",singular:"SOL",centPlural:"CENTIMOS",centSingular:"CENTIMO"})}}return t.\u0275fac=function(i){return new(i||t)(r.Pb(a.e),r.Pb(d.a),r.Pb(b.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-restaurant-order-ticket"]],inputs:{transaction:"transaction",isVisible:"isVisible"},decls:5,vars:5,consts:[["nzTitle","5px to Top","nzClosable","","nzTitle","Detalle de Pedido",3,"nzVisible","nzStyle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["nzModalContent",""],["modalFooter",""],["id","invoice-document",1,"ticket-print",2,"-webkit-transform","scale(0.85)"],[1,"row"],[1,"col-lg-12",2,"padding","0"],[2,"margin","0","font-size","70%","text-align","center","font-family","Verdana, Geneva, sans-serif"],[2,"margin","0","font-size","70%","font-family","Verdana, Geneva, sans-serif","border-top","1.5px dashed #000","margin-top","5px","margin-bottom","5px"],[2,"margin","0","font-size","70%","font-family","Verdana, Geneva, sans-serif"],[2,"display","flex"],[2,"width","15%","display","inline-block"],[2,"margin","0","padding","0","font-size","80%","font-family","Verdana, Geneva, sans-serif"],[2,"width","50%","display","inline-block"],[2,"width","10%","display","inline-block"],[2,"width","20%","display","inline-block"],[2,"margin","0","font-size","80%","font-family","Verdana, Geneva, sans-serif","border-top","1.5px dashed #000","margin-top","5px","margin-bottom","5px"],["style","display: flex;",4,"ngFor","ngForOf"],[2,"width","60%","margin","0","font-size","80%","display","inline-block"],[2,"margin","0","font-size","80%","font-family","Verdana, Geneva, sans-serif"],[2,"width","40%","display","inline-block","vertical-align","top","text-align","right"],[2,"margin","0","font-size","70%","text-align","center","font-family","Verdana, Geneva, sans-serif","font-weight","normal","padding-bottom","5px"],["nz-button","","nzType","primary","printSectionId","invoice-document","ngxPrint","",3,"click"],["nz-button","","nzType","default",3,"click"]],template:function(t,i){if(1&t&&(r.Vb(0,"nz-modal",0),r.fc("nzVisibleChange",function(t){return i.isVisible=t})("nzOnCancel",function(){return i.handleCancel()}),r.Fc(1,S,43,10,"ng-template",null,1,r.Gc),r.Fc(3,w,4,0,"ng-template",null,2,r.Gc),r.Ub()),2&t){const t=r.xc(2),e=r.xc(4);r.oc("nzVisible",i.isVisible)("nzStyle",r.rc(4,M))("nzContent",t)("nzFooter",e)}},directives:[U.a,n.n,C.a,P.a,z.a,v.a],pipes:[n.d],styles:[".ticket-print[_ngcontent-%COMP%]{width:100%;top:-50px;position:inherit}.ticket-print[_ngcontent-%COMP%]   .igv-zone[_ngcontent-%COMP%], .ticket-print[_ngcontent-%COMP%]   .neto-zone[_ngcontent-%COMP%], .ticket-print[_ngcontent-%COMP%]   .total-zone[_ngcontent-%COMP%]{text-align:left}.ticket-print[_ngcontent-%COMP%]   .igv-zone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, .ticket-print[_ngcontent-%COMP%]   .neto-zone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, .ticket-print[_ngcontent-%COMP%]   .total-zone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{display:inline-block}@media print{#printable-section[_ngcontent-%COMP%]{diplay:block}.ticket-print[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Verdana,Geneva,sans-serif!important;font-size:15px!important;transform:scale(.75)!important}}"]}),t})();function k(t,i){if(1&t&&(r.Vb(0,"mat-list-option",31),r.Hc(1),r.Ub()),2&t){const t=i.$implicit;r.oc("value",t)("selected",null!=t.businessobjectsonid),r.Bb(1),r.Jc(" ",t.nameconcat," ")}}const j=function(){return{xs:8,sm:16,md:24,lg:32}};function _(t,i){if(1&t){const t=r.Wb();r.Vb(0,"div",24),r.Vb(1,"div",9),r.Vb(2,"div",25),r.Vb(3,"div",10),r.Vb(4,"mat-selection-list",null,26),r.Vb(6,"div",27),r.Hc(7,"Materia Prima"),r.Ub(),r.Fc(8,k,2,3,"mat-list-option",28),r.Ub(),r.Vb(9,"div",29),r.Vb(10,"button",30),r.fc("click",function(i){r.yc(t);const e=r.xc(5);return r.ic().addBasicProduct(i,e)}),r.Hc(11,"AGREGAR"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.ic();r.Bb(1),r.oc("nzGutter",r.rc(2,j)),r.Bb(7),r.oc("ngForOf",t.productsPrimary)}}function H(t,i){if(1&t){const t=r.Wb();r.Vb(0,"div",10),r.Vb(1,"div"),r.Qb(2,"div",32),r.Vb(3,"div",9),r.Vb(4,"div",33),r.fc("click",function(){r.yc(t);const e=i.$implicit,n=i.index;return r.ic().onClickNameDetailsProduct(e,n)}),r.Vb(5,"h6",34),r.Hc(6),r.Ub(),r.Ub(),r.Vb(7,"div",18),r.Vb(8,"button",35),r.fc("click",function(){r.yc(t);const e=i.$implicit,n=i.index;return r.ic().removeDetail(e,n)}),r.Qb(9,"i",36),r.Ub(),r.Ub(),r.Ub(),r.Vb(10,"div",9),r.Vb(11,"div",37),r.Vb(12,"textarea",38),r.fc("ngModelChange",function(t){return i.$implicit.comment=t}),r.Ub(),r.Ub(),r.Ub(),r.Vb(13,"div",9),r.Vb(14,"div",18),r.Vb(15,"button",39),r.fc("click",function(){r.yc(t);const e=i.index;return r.ic().minCount(e)}),r.Qb(16,"i",40),r.Ub(),r.Vb(17,"button",41),r.Hc(18),r.Ub(),r.Vb(19,"button",39),r.fc("click",function(){r.yc(t);const e=i.index;return r.ic().addCount(e)}),r.Qb(20,"i",42),r.Ub(),r.Ub(),r.Vb(21,"div",18),r.Hc(22),r.jc(23,"currency"),r.Ub(),r.Vb(24,"div",18),r.Hc(25),r.jc(26,"currency"),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=i.$implicit;r.Bb(3),r.oc("nzGutter",r.rc(23,j)),r.Bb(1),r.oc("nzSpan",20),r.Bb(2),r.Ic(t.product),r.Bb(1),r.oc("nzSpan",4),r.Bb(3),r.oc("nzGutter",r.rc(24,j)),r.Bb(1),r.oc("nzSpan",24),r.Bb(1),r.oc("ngModel",t.comment)("disabled",null!=t.subtransactiondetailid),r.Bb(1),r.oc("nzGutter",r.rc(25,j)),r.Bb(1),r.oc("nzSpan",12),r.Bb(1),r.oc("disabled",null!=t.subtransactiondetailid),r.Bb(3),r.Ic(t.amount),r.Bb(1),r.oc("disabled",null!=t.subtransactiondetailid),r.Bb(2),r.oc("nzSpan",6),r.Bb(1),r.Jc(" ",r.lc(23,17,t.unitpricesale,"S/"),""),r.Bb(2),r.oc("nzSpan",6),r.Bb(1),r.Ic(r.lc(26,20,t.total,"S/"))}}function I(t,i){if(1&t&&(r.Vb(0,"div"),r.Qb(1,"app-image-product",47),r.Ub()),2&t){const t=r.ic().$implicit;r.Bb(1),r.oc("urlimage",t.image)}}function F(t,i){if(1&t){const t=r.Wb();r.Vb(0,"div",45),r.fc("click",function(){r.yc(t);const e=i.$implicit;return r.ic(2).onProductClick(e)}),r.Vb(1,"div",25),r.Vb(2,"div",46),r.Fc(3,I,2,1,"div",23),r.Vb(4,"div",7),r.Hc(5),r.Ub(),r.Ub(),r.Vb(6,"div",10),r.Hc(7),r.jc(8,"currency"),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=i.$implicit,e=r.ic(2);r.Bb(3),r.oc("ngIf",e.productImage),r.Bb(2),r.Jc("",t.nameconcat," "),r.Bb(2),r.Jc(" ",r.lc(8,3,t.unitpricesale,"S/"),"")}}function T(t,i){if(1&t&&(r.Vb(0,"div",43),r.Vb(1,"div",9),r.Fc(2,F,9,6,"div",44),r.Ub(),r.Ub()),2&t){const t=r.ic();r.Bb(1),r.oc("nzGutter",r.rc(2,j)),r.Bb(1),r.oc("ngForOf",t.products)}}function D(t,i){if(1&t&&(r.Vb(0,"div"),r.Qb(1,"app-restaurant-order-ticket",48),r.Ub()),2&t){const t=r.ic();r.Bb(1),r.oc("transaction",t.transaction)("isVisible",t.showprintorderticket)}}const G=function(){return{standalone:!0}};let R=(()=>{class t{constructor(t,i,e,n,a,s){this.clientService=t,this.userService=i,this.orderService=e,this.businessobjectService=n,this.datepipe=s,this.products=[],this.productsPrimary=[],this.transaction={details:[],total:0,employedid:this.userService.employedid,dateinit:new Date,date:new Date},this.identitynumberdoc="",this.categories=[],this.productImage=!1,this.index_cat=0,this.index_detail=0,this.isSubmitted=!1,this.showprintorderticket=!1,this.flexhidemateriaprima=!0,this.subjectrolid=1,a.params.subscribe(t=>{this.subtransactionid=t.id,this.resouceid=t.table,this.identitynumberdoc=t.identitynumber,this.vouchertypeid=1,"new"!==this.subtransactionid&&this.loadOrder(this.subtransactionid)})}loadOrder(t){this.orderService.loadOrder(t).subscribe(t=>{this.transaction=t,this.calculateTotal()})}selectClientChange(t){this.transaction.externalsubjectid=t.externalsubjectid,this.transaction.vouchertypeid=t.vouchertypeid,this.transaction.businessname=t.client.subject,this.transaction.address=t.client.address,this.transaction.identitynumber=t.client.identitynumber,this.transaction.email=t.client.email,this.client=t.client}save(t){if(t.preventDefault(),this.isSubmitted=!0,this.transaction.startdate=this.datepipe.transform(this.transaction.date,"dd/MM/yyyy HH:mm:ss"),this.transaction.resources=[{resourceid:this.resouceid}],this.transaction.internalsubjectid=this.userService.subsidiaryid,this.transaction.details.length<=0)return o.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"error",title:"No tiene Detalles"}),void(this.isSubmitted=!1);this.orderService.saveOrder(this.transaction,"restaurant").subscribe({next:t=>{this.transaction.code=t.code,this.showprintorderticket=!0,o.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"Se guardo la Orden"}),this.transaction.email!=this.client.email&&(this.client.email=this.transaction.email,this.client.startdate=this.datepipe.transform(this.client.startdate,"dd/MM/yyyy HH:mm:ss"),this.client.subjectrolid=1,null!=this.client.identitydocument&&(this.client.identitydocumentid=this.client.identitydocument.id,this.client.rateid=this.client.rate.id,this.client.subjectid=this.client.subject.id,this.client.subjecttypeid=this.client.subject.subjecttype.id,this.client.subjectrolcategoryid=this.client.subjectrolcategory.id),this.clientService.saveDirectClient(this.client).subscribe(t=>{alertify.success("Se Actualizo correctamente el correo")},t=>{console.log(t)}))},error:t=>{o.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"error",title:"Problemas al guardar  "}),this.isSubmitted=!1}})}ngOnInit(){this.listProductsRestaurant()}addCount(t){this.transaction.details[t].amount++,this.calculateTotal()}minCount(t){this.transaction.details[t].amount--,this.transaction.details[t].amount<0&&(this.transaction.details[t].amount=0),this.calculateTotal()}addBasicProduct(t,i){t.preventDefault();let e=i.selectedOptions.selected.map(t=>t.value);const n=this.transaction.details[this.index_detail].details.filter(({businessobjectdetailid:t})=>!e.some(({businessobjectdetailid:i})=>i===t));this.transaction.details[this.index_detail].details=e,n.length>0&&(this.transaction.details[this.index_detail].comment=this.transaction.details[this.index_detail].comment+" Sin: "+n.map(t=>t.nameconcat)),this.flexhidemateriaprima=!0}onClickNameDetailsProduct(t,i){null!=t.details&&t.details.length>0&&(this.flexhidemateriaprima=!1,this.productsPrimary=t.details)}onClickDetailsProduct(t,i){this.index_detail=i,this.businessobjectService.listProductsBasic(t.businessobjectid).subscribe(t=>{t.length>0&&(this.transaction.details[this.index_detail].details=t)})}listProductsRestaurant(){this.businessobjectService.listProductsRestaurant(this.userService.subsidiaryid).subscribe(t=>{let i=0;var e=t.map(function(t){var e={};return e.text=t.name,e.id=""+i,i++,e});this.menuItems=e,this.categories=t,this.products=this.categories[0].products,this.productImage=!0})}removeDetail(t,i){this.transaction.details.splice(i,1),this.calculateTotal()}getItemIndex(t){this.index_cat=t.item.properties.id,this.products=this.categories[this.index_cat].products}onProductClick(t){if(window.scrollTo(0,0),1==this.userService.setting.includedigv){let i=!1,e=this.transaction.details.find(i=>i.businessobjectdetailid==t.businessobjectdetailid);console.log(e),i=null!=e&&!(e.length>2)&&null==e.subtransactiondetailid,console.log(i),i?(this.transaction.details.forEach(i=>{i.businessobjectdetailid==t.businessobjectdetailid&&(i.amount=1*i.amount+1)}),this.calculateTotal()):(console.log("llego"),this.addProductToDetails(t))}else this.addProductToDetails(t)}addProductToDetails(t){var i=Object.assign({},t);i.unitpricereal=i.unitpricesale;var e=new Date;new Date(e.getFullYear(),e.getMonth(),1),new Date(e.getFullYear(),e.getMonth()+1,0),this.transaction.details.push({comment:"",amount:1,unitmeasure:i.unitmeasure,product:i.nameconcat,stock:i.stock,businessobjectid:i.businessobjectid,businessobjectdetailid:i.businessobjectdetailid,valuedbusinessobjectid:i.valuedbusinessobjectid,unitpricesale:i.unitpricesale,unitpricereal:i.unitpricereal,totalmoney:i.unitpricesale,subtransactionid:0,subtransactionorderid:0,nameobjectrole:i.nameobjectrole,id:0,unitpricepurchase:i.unitprice,operationaffectedid:null!=i.operationaffectedid?i.operationaffectedid:10,minimalPrice:i.minimalPrice,convertautomatic:i.convertautomatic,stockTemp:i.stockTemp,code:i.code}),this.calculateTotal(),this.onClickDetailsProduct(t,this.transaction.details.length-1)}calculateTotal(){this.transaction.neto=0,this.transaction.total=0;let t=0,i=0,e=this.transaction.details;for(let n=0;n<e.length;n++)e[n].totalmoney=e[n].amount*e[n].unitpricesale,i+=e[n].amount*e[n].unitpricesale,t+=e[n].totalmoney,e[n].total=e[n].totalmoney;this.transaction.neto=0==this.userService.setting.includedigv?t:t/(1*this.userService.igv.valor+1),this.transaction.igv=0==this.userService.setting.includedigv||0==this.transaction.applytax?0:this.transaction.neto*this.userService.igv.valor,this.transaction.total=this.transaction.neto+this.transaction.igv,this.transaction.total=Math.round(100*this.transaction.total)/100,this.transaction.neto=Math.round(100*this.transaction.neto)/100,this.transaction.igv=Math.round(100*this.transaction.igv)/100}}return t.\u0275fac=function(i){return new(i||t)(r.Pb(l.a),r.Pb(d.a),r.Pb(b.a),r.Pb(u.a),r.Pb(a.a),r.Pb(n.f))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-order-restaurant"]],decls:38,vars:29,consts:[["cssClass","customCss",3,"items","enableScrolling","select"],[1,"container-mobile"],["class","flex3-mobile",4,"ngIf"],[1,"flex2-mobile"],["tabindex","0","id","basic",1,"e-card"],[1,"e-card-header","color-header-black"],[1,"e-card-header-caption"],[1,"e-card-title"],[1,"text-white"],["nz-row","",3,"nzGutter"],[1,"e-card-content"],[3,"identitynumber","subjectrolid","vouchertypeid","subjectrolcategoryid","transactionclient"],[2,"padding-top","2px"],[3,"nzSm","nzXs"],["type","email",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"overflow"],["class","e-card-content",4,"ngFor","ngForOf"],[1,"e-card-title","pt-3"],["nz-col","",1,"gutter-row",3,"nzSpan"],["class","flex1-mobile",4,"ngIf"],[1,"pull-right","floating-button-left"],[1,"btn","btn-success","btn-lg","mr-4",2,"border-radius","40px",3,"disabled","click"],["routerLink","/restaurant",1,"btn","btn-danger","btn-lg",2,"border-radius","40px"],[4,"ngIf"],[1,"flex3-mobile"],[1,"e-card"],["selectionlistproduct",""],["mat-subheader",""],[3,"value","selected",4,"ngFor","ngForOf"],[1,"pull-left"],[1,"btn","btn-success","btn-light","mr-4",3,"click"],[3,"value","selected"],[1,"e-card-separator"],["nz-col","",1,"gutter-row",3,"nzSpan","click"],[1,"text-left"],[1,"btn","btn-outline-danger","btn-xs",3,"click"],["nz-icon","","nzType","close"],["nz-col","",1,"gutter-row",2,"margin-top","2px","margin-bottom","2px",3,"nzSpan"],["nz-input","","placeholder","Opcionales del pedido","nzAutosize","",3,"ngModel","disabled","ngModelChange"],[1,"btn","btn-outline-primary","btn-xs",3,"disabled","click"],["nz-icon","","nzType","minus"],[1,"btn","btn-dark","btn-xs"],["nz-icon","","nzType","plus"],[1,"flex1-mobile"],["class","restaurant-order-item","style","padding-left: 5px;padding-bottom: 5px;padding-right: 5px;",3,"click",4,"ngFor","ngForOf"],[1,"restaurant-order-item",2,"padding-left","5px","padding-bottom","5px","padding-right","5px",3,"click"],[1,"e-card-image"],[3,"urlimage"],[3,"transaction","isVisible"]],template:function(t,i){1&t&&(r.Vb(0,"ejs-menu",0),r.fc("select",function(t){return i.getItemIndex(t)}),r.Ub(),r.Vb(1,"div",1),r.Fc(2,_,12,3,"div",2),r.Vb(3,"div",3),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Vb(6,"div",6),r.Vb(7,"div",7),r.Vb(8,"h6",8),r.Hc(9),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(10,"div",9),r.Vb(11,"div",10),r.Vb(12,"app-select-person",11),r.fc("transactionclient",function(t){return i.selectClientChange(t)}),r.Ub(),r.Vb(13,"nz-form-item",12),r.Vb(14,"nz-form-label",13),r.Hc(15,"Correo"),r.Ub(),r.Vb(16,"nz-form-control",13),r.Vb(17,"input",14),r.fc("ngModelChange",function(t){return i.transaction.email=t}),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(18,"div",15),r.Fc(19,H,27,26,"div",16),r.Ub(),r.Vb(20,"div",5),r.Vb(21,"div",6),r.Vb(22,"div",17),r.Vb(23,"div",9),r.Vb(24,"div",18),r.Vb(25,"h6",8),r.Hc(26,"Total A Pagar"),r.Ub(),r.Ub(),r.Vb(27,"div",18),r.Vb(28,"h6",8),r.Hc(29),r.jc(30,"currency"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Fc(31,T,3,3,"div",19),r.Vb(32,"div",20),r.Vb(33,"button",21),r.fc("click",function(t){return i.save(t)}),r.Hc(34,"Guardar"),r.Ub(),r.Vb(35,"button",22),r.Hc(36,"Cancelar"),r.Ub(),r.Ub(),r.Ub(),r.Fc(37,D,2,2,"div",23)),2&t&&(r.oc("items",i.menuItems)("enableScrolling",!0),r.Bb(2),r.oc("ngIf",!i.flexhidemateriaprima),r.Bb(7),r.Jc("Recurso : ",i.orderService.headerOrder.name,""),r.Bb(1),r.oc("nzGutter",r.rc(26,j)),r.Bb(2),r.oc("identitynumber",i.identitynumberdoc)("subjectrolid",i.subjectrolid)("vouchertypeid",i.vouchertypeid)("subjectrolcategoryid",2),r.Bb(2),r.oc("nzSm",6)("nzXs",24),r.Bb(2),r.oc("nzSm",14)("nzXs",24),r.Bb(1),r.oc("ngModel",i.transaction.email)("ngModelOptions",r.rc(27,G)),r.Bb(2),r.oc("ngForOf",i.transaction.details),r.Bb(4),r.oc("nzGutter",r.rc(28,j)),r.Bb(1),r.oc("nzSpan",16),r.Bb(3),r.oc("nzSpan",8),r.Bb(2),r.Ic(r.lc(30,23,i.transaction.total,"S/")),r.Bb(2),r.oc("ngIf",i.flexhidemateriaprima),r.Bb(2),r.oc("disabled",i.isSubmitted),r.Bb(4),r.oc("ngIf",i.showprintorderticket))},directives:[h.a,n.o,p.c,m.a,p.a,g.c,g.m,g.p,n.n,a.f,f.d,f.c,f.b,v.a,y.b,V.b,V.a,x.a,B],pipes:[n.d],styles:[".restaurant-order-content[_ngcontent-%COMP%]{grid-gap:10px;grid-template-columns:repeat(6,1fr);grid-auto-rows:200px 100px;flex-wrap:wrap}.color-header-black[_ngcontent-%COMP%]{background:#000}.restaurant-order-item[_ngcontent-%COMP%]{width:120px;height:160px}.restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+1), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+2), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+3), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+4), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+5){grid-column:span 3}@media (min-width:580px){.restaurant-order-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}}.overflow[_ngcontent-%COMP%]{overflow-y:auto;max-height:170px}@media (min-height:520px){.overflow[_ngcontent-%COMP%]{max-height:170px}}@media (min-height:600px){.overflow[_ngcontent-%COMP%]{max-height:250px}}@media (min-height:768px){.overflow[_ngcontent-%COMP%]{max-height:400px}}@media (min-height:900px){.overflow[_ngcontent-%COMP%]{max-height:500px}}@media (min-height:950px){.overflow[_ngcontent-%COMP%]{max-height:550px}}@media (min-height:1080px){.overflow[_ngcontent-%COMP%]{max-height:700px}}@media (min-height:1280px){.overflow[_ngcontent-%COMP%]{max-height:900px}}@media (min-height:1440px){.overflow[_ngcontent-%COMP%]{max-height:1050px}}@media (min-height:1600px){.overflow[_ngcontent-%COMP%]{max-height:1250px}}.customCss[_ngcontent-%COMP%]   ul.e-menu[_ngcontent-%COMP%]{font-style:italic;color:#fff;background:#06d79c;size:20px}.disabled-div[_ngcontent-%COMP%]{cursor:not-allowed}"]}),t})();var A=e("3idg"),J=e("nkYO");function N(t,i){if(1&t&&(r.Vb(0,"div",15),r.Vb(1,"div",16),r.Vb(2,"h6"),r.Hc(3),r.Ub(),r.Ub(),r.Ub()),2&t){const t=r.ic();r.Bb(3),r.Jc("Recurso : ",t.orderService.headerOrder.name,"")}}function Q(t,i){if(1&t){const t=r.Wb();r.Vb(0,"div",17),r.Vb(1,"div"),r.Vb(2,"app-pay-sale-prepare",18),r.fc("paysale",function(i){return r.yc(t),r.ic().selectPayChange(i)}),r.Ub(),r.Ub(),r.Ub()}if(2&t){const t=r.ic();r.Bb(2),r.oc("subtransactionid",t.subtransactionid)("subtransactionstateid",t.transaction.subtransactionstateid)("totalpay",t.transaction.total)}}function E(t,i){if(1&t&&(r.Vb(0,"div"),r.Qb(1,"app-sale-ticket",19),r.Ub()),2&t){const t=r.ic();r.Bb(1),r.oc("subtransactionid",t.transaction.subtransactionid)("viewUsing","restaurant")("viewreturn",t.viewreturn)("isVisible",t.showprintsale)}}const X=function(){return{standalone:!0}},L=function(t){return[t]},$=[{path:"",component:s.n,data:{title:"Restaurant"}},{path:"order/:id/:table/:identitynumber/:vouchertypeid",component:R,data:{title:"Orden Pedido"}},{path:"payorder/:id/:table/:identitynumber/:vouchertypeid/:viewreturn",component:(()=>{class t{constructor(t,i,e,n,a,s){this.userService=t,this.orderService=i,this.businessobjectService=e,this.datepipe=a,this.clientService=s,this.transaction={listfee:[],details:[],total:0,employedid:this.userService.employedid,dateinit:new Date},this.identitynumberdoc="",this.isSubmitted=!1,this.isloadtransaction=!1,this.showprintsale=!1,this.viewreturn="",n.params.subscribe(t=>{this.subtransactionid=t.id,this.resouceid=t.table,this.identitynumberdoc=t.identitynumber,this.vouchertypeid=1,this.viewreturn="/"+t.viewreturn,"new"!==this.subtransactionid&&this.loadOrder(this.subtransactionid)})}loadOrder(t){this.orderService.loadOrder(t).subscribe(t=>{this.isloadtransaction=!0,this.transaction=t})}selectClientChange(t){this.transaction.externalsubjectid=t.externalsubjectid,this.transaction.vouchertypeid=t.vouchertypeid,this.transaction.businessname=t.client.subject,this.transaction.address=t.client.address,this.transaction.identitynumber=t.client.identitynumber,this.transaction.email=t.client.email,this.client=t.client}selectPayChange(t){this.transaction.listfee=t,console.log(this.transaction)}save(t){t.preventDefault(),this.isSubmitted=!0,this.orderService.convertToInvoice(this.transaction).subscribe(t=>{this.transaction.subtransactionstateid=t.subtransactionstateid,this.transaction.subtransactionid=t.subtransactionid,this.subtransactionid=t.subtransactionid,console.log(t),this.showprintsale=!0,this.transaction.email!=this.client.email&&(this.client.email=this.transaction.email,this.client.startdate=this.datepipe.transform(this.client.startdate,"dd/MM/yyyy HH:mm:ss"),this.client.subjectrolid=1,null!=this.client.identitydocument&&(this.client.identitydocumentid=this.client.identitydocument.id,this.client.rateid=this.client.rate.id,this.client.subjectid=this.client.subject.id,this.client.subjecttypeid=this.client.subject.subjecttype.id,this.client.subjectrolcategoryid=this.client.subjectrolcategory.id),this.clientService.saveDirectClient(this.client).subscribe(t=>{alertify.success("Se Actualizo correctamente el correo")},t=>{console.log(t)}))})}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)(r.Pb(d.a),r.Pb(b.a),r.Pb(u.a),r.Pb(a.a),r.Pb(n.f),r.Pb(l.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-pay-convert-restaurant"]],decls:20,vars:17,consts:[[1,"container-mobile"],[1,"flex2-mobile"],["tabindex","0",1,"e-card",2,"margin-top","8px"],[1,"e-card-header","color-header-black"],["class","e-card-header-caption",4,"ngIf"],[1,"e-card-content"],[3,"identitynumber","vouchertypeid","subjectrolcategoryid","transactionclient"],[2,"padding-top","2px"],[3,"nzSm","nzXs"],["type","email",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","flex1-mobile",4,"ngIf"],[1,"pull-right","floating-button-left"],[1,"btn","btn-success","btn-lg","mr-4",2,"border-radius","30px",3,"disabled","click"],[1,"btn","btn-danger","btn-lg",2,"border-radius","30px",3,"routerLink"],[4,"ngIf"],[1,"e-card-header-caption"],[1,"e-card-title"],[1,"flex1-mobile"],[3,"subtransactionid","subtransactionstateid","totalpay","paysale"],[3,"subtransactionid","viewUsing","viewreturn","isVisible"]],template:function(t,i){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Vb(3,"div",3),r.Fc(4,N,4,1,"div",4),r.Ub(),r.Vb(5,"div"),r.Vb(6,"div",5),r.Vb(7,"app-select-person",6),r.fc("transactionclient",function(t){return i.selectClientChange(t)}),r.Ub(),r.Vb(8,"nz-form-item",7),r.Vb(9,"nz-form-label",8),r.Hc(10,"Correo"),r.Ub(),r.Vb(11,"nz-form-control",8),r.Vb(12,"input",9),r.fc("ngModelChange",function(t){return i.transaction.email=t}),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Fc(13,Q,3,3,"div",10),r.Vb(14,"div",11),r.Vb(15,"button",12),r.fc("click",function(t){return i.save(t)}),r.Hc(16,"Guardar"),r.Ub(),r.Vb(17,"button",13),r.Hc(18,"Cancelar"),r.Ub(),r.Ub(),r.Ub(),r.Fc(19,E,2,4,"div",14)),2&t&&(r.Bb(4),r.oc("ngIf",0!=i.resouceid),r.Bb(3),r.oc("identitynumber",i.identitynumberdoc)("vouchertypeid",i.vouchertypeid)("subjectrolcategoryid",2),r.Bb(2),r.oc("nzSm",6)("nzXs",24),r.Bb(2),r.oc("nzSm",14)("nzXs",24),r.Bb(1),r.oc("ngModel",i.transaction.email)("ngModelOptions",r.rc(14,X)),r.Bb(1),r.oc("ngIf",i.isloadtransaction),r.Bb(2),r.oc("disabled",i.isSubmitted),r.Bb(2),r.oc("routerLink",r.sc(15,L,i.viewreturn)),r.Bb(2),r.oc("ngIf",i.showprintsale))},directives:[n.o,m.a,p.c,p.a,g.c,g.m,g.p,a.f,A.a,J.a],styles:[""]}),t})(),data:{title:"Pago y Generacion de Comprobante"}}];let K=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(i){return new(i||t)},imports:[[a.i.forChild($)],a.i]}),t})(),W=(()=>{class t{}return t.\u0275mod=r.Nb({type:t}),t.\u0275inj=r.Mb({factory:function(i){return new(i||t)},imports:[[n.c,K]]}),t})()}}]);