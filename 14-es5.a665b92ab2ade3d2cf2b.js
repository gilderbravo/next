!function(){function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{YAKK:function(i,n,a){"use strict";a.r(n),a.d(n,"RestaurantModule",function(){return nt});var c=a("ofXK"),r=a("tyNb"),o=a("R4wn"),s=a("PSD3"),l=a.n(s),d=a("fXoL"),b=a("/67R"),u=a("CFL1"),p=a("KWTU"),h=a("K7Ed"),m=a("hXFv"),f=a("B+r4"),v=a("iAHN"),g=a("3Pt+"),y=a("MutI"),V=a("C2AL"),x=a("FwiY"),U=a("PTRe"),C=a("TQKw"),k=a("dEAy"),P=a("OzZK"),z=a("RwU8"),O=a("m1XX");function S(t,i){if(1&t&&(d.Vb(0,"div",9),d.Vb(1,"div",10),d.Vb(2,"p",11),d.Hc(3),d.Ub(),d.Ub(),d.Vb(4,"div",12),d.Vb(5,"p",11),d.Hc(6),d.Ub(),d.Ub(),d.Vb(7,"div",13),d.Vb(8,"p",11),d.Hc(9),d.jc(10,"currency"),d.Ub(),d.Ub(),d.Vb(11,"div",14),d.Vb(12,"p",11),d.Hc(13),d.jc(14,"currency"),d.Ub(),d.Ub(),d.Ub()),2&t){var e=i.$implicit;d.Bb(3),d.Ic(e.amount),d.Bb(3),d.Kc("",e.product," "," "+e.comment,""),d.Bb(3),d.Ic(d.lc(10,5,e.unitpricesale,"S/")),d.Bb(4),d.Ic(d.lc(14,8,e.totalmoney,"S/"))}}function w(t,i){if(1&t&&(d.Vb(0,"div",3),d.Vb(1,"div",4),d.Vb(2,"div",5),d.Vb(3,"p",6),d.Vb(4,"strong"),d.Hc(5),d.Ub(),d.Ub(),d.Qb(6,"p",7),d.Vb(7,"p",8),d.Hc(8),d.Ub(),d.Vb(9,"p",8),d.Hc(10),d.Ub(),d.Vb(11,"p",8),d.Hc(12),d.Ub(),d.Qb(13,"p",7),d.Ub(),d.Vb(14,"div",5),d.Vb(15,"div",9),d.Vb(16,"div",10),d.Vb(17,"p",11),d.Hc(18,"C."),d.Ub(),d.Ub(),d.Vb(19,"div",12),d.Vb(20,"p",11),d.Hc(21,"Detalle"),d.Ub(),d.Ub(),d.Vb(22,"div",13),d.Vb(23,"p",11),d.Hc(24,"P.U"),d.Ub(),d.Ub(),d.Vb(25,"div",14),d.Vb(26,"p",11),d.Hc(27,"Imp."),d.Ub(),d.Ub(),d.Ub(),d.Qb(28,"p",15),d.Fc(29,S,15,11,"div",16),d.Qb(30,"p",15),d.Vb(31,"div",9),d.Vb(32,"div",17),d.Vb(33,"p",18),d.Hc(34,"TOTAL ORDEN:"),d.Ub(),d.Ub(),d.Vb(35,"div",19),d.Vb(36,"p",18),d.Hc(37),d.jc(38,"currency"),d.Ub(),d.Ub(),d.Ub(),d.Qb(39,"p",7),d.Vb(40,"p",20),d.Hc(41),d.Ub(),d.Qb(42,"p",7),d.Ub(),d.Ub(),d.Ub()),2&t){var e=d.ic();d.Bb(5),d.Ic("N\xb0 ORDEN : "+e.transaction.code!=null?e.transaction.code:e.transaction.pnumber),d.Bb(3),d.Jc("Mesa: ",e.transaction.resouce,""),d.Bb(2),d.Jc("Fecha: ",e.transaction.startdate,""),d.Bb(2),d.Jc("Mozo: ",e.transaction.employed,""),d.Bb(17),d.oc("ngForOf",e.transaction.details),d.Bb(8),d.Jc(" ",d.lc(38,7,e.transaction.total,"S/"),""),d.Bb(4),d.Jc("SON: ",1==e.transaction.freesale?"TRANSFERENCIA GRATUITA":e.transaction.numbertext,"")}}function M(t,i){if(1&t){var e=d.Wb();d.Vb(0,"button",21),d.fc("click",function(){return d.yc(e),d.ic().handleOk("invoice-document")}),d.Hc(1,"Imprimir"),d.Ub(),d.Vb(2,"button",22),d.fc("click",function(){return d.yc(e),d.ic().handleCancel()}),d.Hc(3,"Salir"),d.Ub()}}var B,j=function(){return{width:"380px",top:"5px"}},_=((B=function(){function i(e,n,a){t(this,i),this.router=e,this.userService=n,this.orderService=a,this.size="small",this.qrdata=null,this.isdirectprint=!1,this.transaction={details:[]},this.isVisible=!1}return e(i,[{key:"ngOnInit",value:function(){console.log(this.transaction),console.log(this.isVisible),this.isdirectprint=!0,this.qrdata="nextfuture",this.isVisible=!0,this.transaction.employed=this.orderService.headerOrder.employed,this.transaction.resouce=this.orderService.headerOrder.name,this.calculateTotal()}},{key:"handleCancel",value:function(){if(this.isVisible=!1,this.isdirectprint)return this.router.navigate(["/restaurant"])}},{key:"handleOk",value:function(t){if(this.isVisible=!1,this.isdirectprint)return this.router.navigate(["/restaurant"])}},{key:"calculateTotal",value:function(){this.transaction.neto=0,this.transaction.total=0;for(var t=0,i=this.transaction.details,e=0;e<i.length;e++)i[e].totalmoney=i[e].amount*i[e].unitpricesale,i[e].amount,i[e].unitpricesale,t+=i[e].totalmoney,i[e].total=i[e].totalmoney;this.transaction.neto=0==this.userService.setting.includedigv?t:t/(1*this.userService.igv.valor+1),this.transaction.igv=0==this.userService.setting.includedigv||0==this.transaction.applytax?0:this.transaction.neto*this.userService.igv.valor,this.transaction.total=this.transaction.neto+this.transaction.igv,this.transaction.total=Math.round(100*this.transaction.total)/100,this.transaction.neto=Math.round(100*this.transaction.neto)/100,this.transaction.igv=Math.round(100*this.transaction.igv)/100,this.transaction.numbertext=numeroALetras(this.transaction.total,{plural:"SOLES",singular:"SOL",centPlural:"CENTIMOS",centSingular:"CENTIMO"})}}]),i}()).\u0275fac=function(t){return new(t||B)(d.Pb(r.e),d.Pb(u.a),d.Pb(p.a))},B.\u0275cmp=d.Jb({type:B,selectors:[["app-restaurant-order-ticket"]],inputs:{transaction:"transaction",isVisible:"isVisible"},decls:5,vars:5,consts:[["nzTitle","5px to Top","nzClosable","","nzTitle","Detalle de Pedido",3,"nzVisible","nzStyle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["nzModalContent",""],["modalFooter",""],["id","invoice-document",1,"ticket-print",2,"-webkit-transform","scale(0.85)"],[1,"row"],[1,"col-lg-12",2,"padding","0"],[2,"margin","0","font-size","70%","text-align","center","font-family","Verdana, Geneva, sans-serif"],[2,"margin","0","font-size","70%","font-family","Verdana, Geneva, sans-serif","border-top","1.5px dashed #000","margin-top","5px","margin-bottom","5px"],[2,"margin","0","font-size","70%","font-family","Verdana, Geneva, sans-serif"],[2,"display","flex"],[2,"width","15%","display","inline-block"],[2,"margin","0","padding","0","font-size","80%","font-family","Verdana, Geneva, sans-serif"],[2,"width","50%","display","inline-block"],[2,"width","10%","display","inline-block"],[2,"width","20%","display","inline-block"],[2,"margin","0","font-size","80%","font-family","Verdana, Geneva, sans-serif","border-top","1.5px dashed #000","margin-top","5px","margin-bottom","5px"],["style","display: flex;",4,"ngFor","ngForOf"],[2,"width","60%","margin","0","font-size","80%","display","inline-block"],[2,"margin","0","font-size","80%","font-family","Verdana, Geneva, sans-serif"],[2,"width","40%","display","inline-block","vertical-align","top","text-align","right"],[2,"margin","0","font-size","70%","text-align","center","font-family","Verdana, Geneva, sans-serif","font-weight","normal","padding-bottom","5px"],["nz-button","","nzType","primary","printSectionId","invoice-document","ngxPrint","",3,"click"],["nz-button","","nzType","default",3,"click"]],template:function(t,i){if(1&t&&(d.Vb(0,"nz-modal",0),d.fc("nzVisibleChange",function(t){return i.isVisible=t})("nzOnCancel",function(){return i.handleCancel()}),d.Fc(1,w,43,10,"ng-template",null,1,d.Gc),d.Fc(3,M,4,0,"ng-template",null,2,d.Gc),d.Ub()),2&t){var e=d.xc(2),n=d.xc(4);d.oc("nzVisible",i.isVisible)("nzStyle",d.rc(4,j))("nzContent",e)("nzFooter",n)}},directives:[k.a,c.n,P.a,z.a,O.a,V.a],pipes:[c.d],styles:[".ticket-print[_ngcontent-%COMP%]{width:100%;top:-50px;position:inherit}.ticket-print[_ngcontent-%COMP%]   .igv-zone[_ngcontent-%COMP%], .ticket-print[_ngcontent-%COMP%]   .neto-zone[_ngcontent-%COMP%], .ticket-print[_ngcontent-%COMP%]   .total-zone[_ngcontent-%COMP%]{text-align:left}.ticket-print[_ngcontent-%COMP%]   .igv-zone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, .ticket-print[_ngcontent-%COMP%]   .neto-zone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child, .ticket-print[_ngcontent-%COMP%]   .total-zone[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{display:inline-block}@media print{#printable-section[_ngcontent-%COMP%]{diplay:block}.ticket-print[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Verdana,Geneva,sans-serif!important;font-size:15px!important;transform:scale(.75)!important}}"]}),B);function H(t,i){if(1&t&&(d.Vb(0,"mat-list-option",31),d.Hc(1),d.Ub()),2&t){var e=i.$implicit;d.oc("value",e)("selected",null!=e.businessobjectsonid),d.Bb(1),d.Jc(" ",e.nameconcat," ")}}var I=function(){return{xs:8,sm:16,md:24,lg:32}};function T(t,i){if(1&t){var e=d.Wb();d.Vb(0,"div",24),d.Vb(1,"div",9),d.Vb(2,"div",25),d.Vb(3,"div",10),d.Vb(4,"mat-selection-list",null,26),d.Vb(6,"div",27),d.Hc(7,"Materia Prima"),d.Ub(),d.Fc(8,H,2,3,"mat-list-option",28),d.Ub(),d.Vb(9,"div",29),d.Vb(10,"button",30),d.fc("click",function(t){d.yc(e);var i=d.xc(5);return d.ic().addBasicProduct(t,i)}),d.Hc(11,"AGREGAR"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&t){var n=d.ic();d.Bb(1),d.oc("nzGutter",d.rc(2,I)),d.Bb(7),d.oc("ngForOf",n.productsPrimary)}}function F(t,i){if(1&t){var e=d.Wb();d.Vb(0,"div",10),d.Vb(1,"div"),d.Qb(2,"div",32),d.Vb(3,"div",9),d.Vb(4,"div",33),d.fc("click",function(){d.yc(e);var t=i.$implicit,n=i.index;return d.ic().onClickNameDetailsProduct(t,n)}),d.Vb(5,"h6",34),d.Hc(6),d.Ub(),d.Ub(),d.Vb(7,"div",18),d.Vb(8,"button",35),d.fc("click",function(){d.yc(e);var t=i.$implicit,n=i.index;return d.ic().removeDetail(t,n)}),d.Qb(9,"i",36),d.Ub(),d.Ub(),d.Ub(),d.Vb(10,"div",9),d.Vb(11,"div",37),d.Vb(12,"textarea",38),d.fc("ngModelChange",function(t){return i.$implicit.comment=t}),d.Ub(),d.Ub(),d.Ub(),d.Vb(13,"div",9),d.Vb(14,"div",18),d.Vb(15,"button",39),d.fc("click",function(){d.yc(e);var t=i.index;return d.ic().minCount(t)}),d.Qb(16,"i",40),d.Ub(),d.Vb(17,"button",41),d.Hc(18),d.Ub(),d.Vb(19,"button",39),d.fc("click",function(){d.yc(e);var t=i.index;return d.ic().addCount(t)}),d.Qb(20,"i",42),d.Ub(),d.Ub(),d.Vb(21,"div",18),d.Hc(22),d.jc(23,"currency"),d.Ub(),d.Vb(24,"div",18),d.Hc(25),d.jc(26,"currency"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&t){var n=i.$implicit;d.Bb(3),d.oc("nzGutter",d.rc(23,I)),d.Bb(1),d.oc("nzSpan",20),d.Bb(2),d.Ic(n.product),d.Bb(1),d.oc("nzSpan",4),d.Bb(3),d.oc("nzGutter",d.rc(24,I)),d.Bb(1),d.oc("nzSpan",24),d.Bb(1),d.oc("ngModel",n.comment)("disabled",null!=n.subtransactiondetailid),d.Bb(1),d.oc("nzGutter",d.rc(25,I)),d.Bb(1),d.oc("nzSpan",12),d.Bb(1),d.oc("disabled",null!=n.subtransactiondetailid),d.Bb(3),d.Ic(n.amount),d.Bb(1),d.oc("disabled",null!=n.subtransactiondetailid),d.Bb(2),d.oc("nzSpan",6),d.Bb(1),d.Jc(" ",d.lc(23,17,n.unitpricesale,"S/"),""),d.Bb(2),d.oc("nzSpan",6),d.Bb(1),d.Ic(d.lc(26,20,n.total,"S/"))}}function D(t,i){if(1&t&&(d.Vb(0,"div"),d.Qb(1,"app-image-product",47),d.Ub()),2&t){var e=d.ic().$implicit;d.Bb(1),d.oc("urlimage",e.image)}}function G(t,i){if(1&t){var e=d.Wb();d.Vb(0,"div",45),d.fc("click",function(){d.yc(e);var t=i.$implicit;return d.ic(2).onProductClick(t)}),d.Vb(1,"div",25),d.Vb(2,"div",46),d.Fc(3,D,2,1,"div",23),d.Vb(4,"div",7),d.Hc(5),d.Ub(),d.Ub(),d.Vb(6,"div",10),d.Hc(7),d.jc(8,"currency"),d.Ub(),d.Ub(),d.Ub()}if(2&t){var n=i.$implicit,a=d.ic(2);d.Bb(3),d.oc("ngIf",a.productImage),d.Bb(2),d.Jc("",n.nameconcat," "),d.Bb(2),d.Jc(" ",d.lc(8,3,n.unitpricesale,"S/"),"")}}function R(t,i){if(1&t&&(d.Vb(0,"div",43),d.Vb(1,"div",9),d.Fc(2,G,9,6,"div",44),d.Ub(),d.Ub()),2&t){var e=d.ic();d.Bb(1),d.oc("nzGutter",d.rc(2,I)),d.Bb(1),d.oc("ngForOf",e.products)}}function A(t,i){if(1&t&&(d.Vb(0,"div"),d.Qb(1,"app-restaurant-order-ticket",48),d.Ub()),2&t){var e=d.ic();d.Bb(1),d.oc("transaction",e.transaction)("isVisible",e.showprintorderticket)}}var J,N=function(){return{standalone:!0}},Q=((J=function(){function i(e,n,a,c,r,o){var s=this;t(this,i),this.clientService=e,this.userService=n,this.orderService=a,this.businessobjectService=c,this.datepipe=o,this.products=[],this.productsPrimary=[],this.transaction={details:[],total:0,employedid:this.userService.employedid,dateinit:new Date,date:new Date},this.identitynumberdoc="",this.categories=[],this.productImage=!1,this.index_cat=0,this.index_detail=0,this.isSubmitted=!1,this.showprintorderticket=!1,this.flexhidemateriaprima=!0,this.subjectrolid=1,r.params.subscribe(function(t){s.subtransactionid=t.id,s.resouceid=t.table,s.identitynumberdoc=t.identitynumber,s.vouchertypeid=1,"new"!==s.subtransactionid&&s.loadOrder(s.subtransactionid)})}return e(i,[{key:"loadOrder",value:function(t){var i=this;this.orderService.loadOrder(t).subscribe(function(t){i.transaction=t,i.calculateTotal()})}},{key:"selectClientChange",value:function(t){this.transaction.externalsubjectid=t.externalsubjectid,this.transaction.vouchertypeid=t.vouchertypeid,this.transaction.businessname=t.client.subject,this.transaction.address=t.client.address,this.transaction.identitynumber=t.client.identitynumber,this.transaction.email=t.client.email,this.client=t.client}},{key:"save",value:function(t){var i=this;if(t.preventDefault(),this.isSubmitted=!0,this.transaction.startdate=this.datepipe.transform(this.transaction.date,"dd/MM/yyyy HH:mm:ss"),this.transaction.resources=[{resourceid:this.resouceid}],this.transaction.internalsubjectid=this.userService.subsidiaryid,this.transaction.details.length<=0)return l.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"error",title:"No tiene Detalles"}),void(this.isSubmitted=!1);this.orderService.saveOrder(this.transaction,"restaurant").subscribe({next:function(t){i.transaction.code=t.code,i.showprintorderticket=!0,l.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"Se guardo la Orden"}),i.transaction.email!=i.client.email&&(i.client.email=i.transaction.email,i.client.startdate=i.datepipe.transform(i.client.startdate,"dd/MM/yyyy HH:mm:ss"),i.client.subjectrolid=1,null!=i.client.identitydocument&&(i.client.identitydocumentid=i.client.identitydocument.id,i.client.rateid=i.client.rate.id,i.client.subjectid=i.client.subject.id,i.client.subjecttypeid=i.client.subject.subjecttype.id,i.client.subjectrolcategoryid=i.client.subjectrolcategory.id),i.clientService.saveDirectClient(i.client).subscribe(function(t){alertify.success("Se Actualizo correctamente el correo")},function(t){console.log(t)}))},error:function(t){l.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"error",title:"Problemas al guardar  "}),i.isSubmitted=!1}})}},{key:"ngOnInit",value:function(){this.listProductsRestaurant()}},{key:"addCount",value:function(t){this.transaction.details[t].amount++,this.calculateTotal()}},{key:"minCount",value:function(t){this.transaction.details[t].amount--,this.transaction.details[t].amount<0&&(this.transaction.details[t].amount=0),this.calculateTotal()}},{key:"addBasicProduct",value:function(t,i){t.preventDefault();var e=i.selectedOptions.selected.map(function(t){return t.value}),n=this.transaction.details[this.index_detail].details.filter(function(t){var i=t.businessobjectdetailid;return!e.some(function(t){return t.businessobjectdetailid===i})});this.transaction.details[this.index_detail].details=e,n.length>0&&(this.transaction.details[this.index_detail].comment=this.transaction.details[this.index_detail].comment+" Sin: "+n.map(function(t){return t.nameconcat})),this.flexhidemateriaprima=!0}},{key:"onClickNameDetailsProduct",value:function(t,i){null!=t.details&&t.details.length>0&&(this.flexhidemateriaprima=!1,this.productsPrimary=t.details)}},{key:"onClickDetailsProduct",value:function(t,i){var e=this;this.index_detail=i,this.businessobjectService.listProductsBasic(t.businessobjectid).subscribe(function(t){t.length>0&&(e.transaction.details[e.index_detail].details=t)})}},{key:"listProductsRestaurant",value:function(){var t=this;this.businessobjectService.listProductsRestaurant(this.userService.subsidiaryid).subscribe(function(i){var e=0,n=i.map(function(t){var i={};return i.text=t.name,i.id=""+e,e++,i});t.menuItems=n,t.categories=i,t.products=t.categories[0].products,t.productImage=!0})}},{key:"removeDetail",value:function(t,i){this.transaction.details.splice(i,1),this.calculateTotal()}},{key:"getItemIndex",value:function(t){this.index_cat=t.item.properties.id,this.products=this.categories[this.index_cat].products}},{key:"onProductClick",value:function(t){if(window.scrollTo(0,0),1==this.userService.setting.includedigv){var i,e=this.transaction.details.find(function(i){return i.businessobjectdetailid==t.businessobjectdetailid});console.log(e),i=null!=e&&!(e.length>2)&&null==e.subtransactiondetailid,console.log(i),i?(this.transaction.details.forEach(function(i){i.businessobjectdetailid==t.businessobjectdetailid&&(i.amount=1*i.amount+1)}),this.calculateTotal()):(console.log("llego"),this.addProductToDetails(t))}else this.addProductToDetails(t)}},{key:"addProductToDetails",value:function(t){var i=Object.assign({},t);i.unitpricereal=i.unitpricesale;var e=new Date;new Date(e.getFullYear(),e.getMonth(),1),new Date(e.getFullYear(),e.getMonth()+1,0),this.transaction.details.push({comment:"",amount:1,unitmeasure:i.unitmeasure,product:i.nameconcat,stock:i.stock,businessobjectid:i.businessobjectid,businessobjectdetailid:i.businessobjectdetailid,valuedbusinessobjectid:i.valuedbusinessobjectid,unitpricesale:i.unitpricesale,unitpricereal:i.unitpricereal,totalmoney:i.unitpricesale,subtransactionid:0,subtransactionorderid:0,nameobjectrole:i.nameobjectrole,id:0,unitpricepurchase:i.unitprice,operationaffectedid:null!=i.operationaffectedid?i.operationaffectedid:10,minimalPrice:i.minimalPrice,convertautomatic:i.convertautomatic,stockTemp:i.stockTemp,code:i.code}),this.calculateTotal(),this.onClickDetailsProduct(t,this.transaction.details.length-1)}},{key:"calculateTotal",value:function(){this.transaction.neto=0,this.transaction.total=0;for(var t=0,i=this.transaction.details,e=0;e<i.length;e++)i[e].totalmoney=i[e].amount*i[e].unitpricesale,i[e].amount,i[e].unitpricesale,t+=i[e].totalmoney,i[e].total=i[e].totalmoney;this.transaction.neto=0==this.userService.setting.includedigv?t:t/(1*this.userService.igv.valor+1),this.transaction.igv=0==this.userService.setting.includedigv||0==this.transaction.applytax?0:this.transaction.neto*this.userService.igv.valor,this.transaction.total=this.transaction.neto+this.transaction.igv,this.transaction.total=Math.round(100*this.transaction.total)/100,this.transaction.neto=Math.round(100*this.transaction.neto)/100,this.transaction.igv=Math.round(100*this.transaction.igv)/100}}]),i}()).\u0275fac=function(t){return new(t||J)(d.Pb(b.a),d.Pb(u.a),d.Pb(p.a),d.Pb(h.a),d.Pb(r.a),d.Pb(c.f))},J.\u0275cmp=d.Jb({type:J,selectors:[["app-order-restaurant"]],decls:38,vars:29,consts:[["cssClass","customCss",3,"items","enableScrolling","select"],[1,"container-mobile"],["class","flex3-mobile",4,"ngIf"],[1,"flex2-mobile"],["tabindex","0","id","basic",1,"e-card"],[1,"e-card-header","color-header-black"],[1,"e-card-header-caption"],[1,"e-card-title"],[1,"text-white"],["nz-row","",3,"nzGutter"],[1,"e-card-content"],[3,"identitynumber","subjectrolid","vouchertypeid","subjectrolcategoryid","transactionclient"],[2,"padding-top","2px"],[3,"nzSm","nzXs"],["type","email",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"overflow"],["class","e-card-content",4,"ngFor","ngForOf"],[1,"e-card-title","pt-3"],["nz-col","",1,"gutter-row",3,"nzSpan"],["class","flex1-mobile",4,"ngIf"],[1,"pull-right","floating-button-left"],[1,"btn","btn-success","btn-lg","mr-4",2,"border-radius","40px",3,"disabled","click"],["routerLink","/restaurant",1,"btn","btn-danger","btn-lg",2,"border-radius","40px"],[4,"ngIf"],[1,"flex3-mobile"],[1,"e-card"],["selectionlistproduct",""],["mat-subheader",""],[3,"value","selected",4,"ngFor","ngForOf"],[1,"pull-left"],[1,"btn","btn-success","btn-light","mr-4",3,"click"],[3,"value","selected"],[1,"e-card-separator"],["nz-col","",1,"gutter-row",3,"nzSpan","click"],[1,"text-left"],[1,"btn","btn-outline-danger","btn-xs",3,"click"],["nz-icon","","nzType","close"],["nz-col","",1,"gutter-row",2,"margin-top","2px","margin-bottom","2px",3,"nzSpan"],["nz-input","","placeholder","Opcionales del pedido","nzAutosize","",3,"ngModel","disabled","ngModelChange"],[1,"btn","btn-outline-primary","btn-xs",3,"disabled","click"],["nz-icon","","nzType","minus"],[1,"btn","btn-dark","btn-xs"],["nz-icon","","nzType","plus"],[1,"flex1-mobile"],["class","restaurant-order-item","style","padding-left: 5px;padding-bottom: 5px;padding-right: 5px;",3,"click",4,"ngFor","ngForOf"],[1,"restaurant-order-item",2,"padding-left","5px","padding-bottom","5px","padding-right","5px",3,"click"],[1,"e-card-image"],[3,"urlimage"],[3,"transaction","isVisible"]],template:function(t,i){1&t&&(d.Vb(0,"ejs-menu",0),d.fc("select",function(t){return i.getItemIndex(t)}),d.Ub(),d.Vb(1,"div",1),d.Fc(2,T,12,3,"div",2),d.Vb(3,"div",3),d.Vb(4,"div",4),d.Vb(5,"div",5),d.Vb(6,"div",6),d.Vb(7,"div",7),d.Vb(8,"h6",8),d.Hc(9),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(10,"div",9),d.Vb(11,"div",10),d.Vb(12,"app-select-person",11),d.fc("transactionclient",function(t){return i.selectClientChange(t)}),d.Ub(),d.Vb(13,"nz-form-item",12),d.Vb(14,"nz-form-label",13),d.Hc(15,"Correo"),d.Ub(),d.Vb(16,"nz-form-control",13),d.Vb(17,"input",14),d.fc("ngModelChange",function(t){return i.transaction.email=t}),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(18,"div",15),d.Fc(19,F,27,26,"div",16),d.Ub(),d.Vb(20,"div",5),d.Vb(21,"div",6),d.Vb(22,"div",17),d.Vb(23,"div",9),d.Vb(24,"div",18),d.Vb(25,"h6",8),d.Hc(26,"Total A Pagar"),d.Ub(),d.Ub(),d.Vb(27,"div",18),d.Vb(28,"h6",8),d.Hc(29),d.jc(30,"currency"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Fc(31,R,3,3,"div",19),d.Vb(32,"div",20),d.Vb(33,"button",21),d.fc("click",function(t){return i.save(t)}),d.Hc(34,"Guardar"),d.Ub(),d.Vb(35,"button",22),d.Hc(36,"Cancelar"),d.Ub(),d.Ub(),d.Ub(),d.Fc(37,A,2,2,"div",23)),2&t&&(d.oc("items",i.menuItems)("enableScrolling",!0),d.Bb(2),d.oc("ngIf",!i.flexhidemateriaprima),d.Bb(7),d.Jc("Recurso : ",i.orderService.headerOrder.name,""),d.Bb(1),d.oc("nzGutter",d.rc(26,I)),d.Bb(2),d.oc("identitynumber",i.identitynumberdoc)("subjectrolid",i.subjectrolid)("vouchertypeid",i.vouchertypeid)("subjectrolcategoryid",2),d.Bb(2),d.oc("nzSm",6)("nzXs",24),d.Bb(2),d.oc("nzSm",14)("nzXs",24),d.Bb(1),d.oc("ngModel",i.transaction.email)("ngModelOptions",d.rc(27,N)),d.Bb(2),d.oc("ngForOf",i.transaction.details),d.Bb(4),d.oc("nzGutter",d.rc(28,I)),d.Bb(1),d.oc("nzSpan",16),d.Bb(3),d.oc("nzSpan",8),d.Bb(2),d.Ic(d.lc(30,23,i.transaction.total,"S/")),d.Bb(2),d.oc("ngIf",i.flexhidemateriaprima),d.Bb(2),d.oc("disabled",i.isSubmitted),d.Bb(4),d.oc("ngIf",i.showprintorderticket))},directives:[m.a,c.o,f.c,v.a,f.a,g.c,g.m,g.p,c.n,r.f,y.d,y.c,y.b,V.a,x.b,U.b,U.a,C.a,_],pipes:[c.d],styles:[".restaurant-order-content[_ngcontent-%COMP%]{grid-gap:10px;grid-template-columns:repeat(6,1fr);grid-auto-rows:200px 100px;flex-wrap:wrap}.color-header-black[_ngcontent-%COMP%]{background:#000}.restaurant-order-item[_ngcontent-%COMP%]{width:120px;height:160px}.restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+1), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+2), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+3), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+4), .restaurant-order-item[_ngcontent-%COMP%]:nth-child(5n+5){grid-column:span 3}@media (min-width:580px){.restaurant-order-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between}}.overflow[_ngcontent-%COMP%]{overflow-y:auto;max-height:170px}@media (min-height:520px){.overflow[_ngcontent-%COMP%]{max-height:170px}}@media (min-height:600px){.overflow[_ngcontent-%COMP%]{max-height:250px}}@media (min-height:768px){.overflow[_ngcontent-%COMP%]{max-height:400px}}@media (min-height:900px){.overflow[_ngcontent-%COMP%]{max-height:500px}}@media (min-height:950px){.overflow[_ngcontent-%COMP%]{max-height:550px}}@media (min-height:1080px){.overflow[_ngcontent-%COMP%]{max-height:700px}}@media (min-height:1280px){.overflow[_ngcontent-%COMP%]{max-height:900px}}@media (min-height:1440px){.overflow[_ngcontent-%COMP%]{max-height:1050px}}@media (min-height:1600px){.overflow[_ngcontent-%COMP%]{max-height:1250px}}.customCss[_ngcontent-%COMP%]   ul.e-menu[_ngcontent-%COMP%]{font-style:italic;color:#fff;background:#06d79c;size:20px}.disabled-div[_ngcontent-%COMP%]{cursor:not-allowed}"]}),J),E=a("3idg"),X=a("nkYO");function L(t,i){if(1&t&&(d.Vb(0,"div",15),d.Vb(1,"div",16),d.Vb(2,"h6"),d.Hc(3),d.Ub(),d.Ub(),d.Ub()),2&t){var e=d.ic();d.Bb(3),d.Jc("Recurso : ",e.orderService.headerOrder.name,"")}}function $(t,i){if(1&t){var e=d.Wb();d.Vb(0,"div",17),d.Vb(1,"div"),d.Vb(2,"app-pay-sale-prepare",18),d.fc("paysale",function(t){return d.yc(e),d.ic().selectPayChange(t)}),d.Ub(),d.Ub(),d.Ub()}if(2&t){var n=d.ic();d.Bb(2),d.oc("subtransactionid",n.subtransactionid)("subtransactionstateid",n.transaction.subtransactionstateid)("totalpay",n.transaction.total)}}function K(t,i){if(1&t&&(d.Vb(0,"div"),d.Qb(1,"app-sale-ticket",19),d.Ub()),2&t){var e=d.ic();d.Bb(1),d.oc("subtransactionid",e.transaction.subtransactionid)("viewUsing","restaurant")("viewreturn",e.viewreturn)("isVisible",e.showprintsale)}}var W,Y,q,Z=function(){return{standalone:!0}},tt=function(t){return[t]},it=[{path:"",component:o.n,data:{title:"Restaurant"}},{path:"order/:id/:table/:identitynumber/:vouchertypeid",component:Q,data:{title:"Orden Pedido"}},{path:"payorder/:id/:table/:identitynumber/:vouchertypeid/:viewreturn",component:(W=function(){function i(e,n,a,c,r,o){var s=this;t(this,i),this.userService=e,this.orderService=n,this.businessobjectService=a,this.datepipe=r,this.clientService=o,this.transaction={listfee:[],details:[],total:0,employedid:this.userService.employedid,dateinit:new Date},this.identitynumberdoc="",this.isSubmitted=!1,this.isloadtransaction=!1,this.showprintsale=!1,this.viewreturn="",c.params.subscribe(function(t){s.subtransactionid=t.id,s.resouceid=t.table,s.identitynumberdoc=t.identitynumber,s.vouchertypeid=1,s.viewreturn="/"+t.viewreturn,"new"!==s.subtransactionid&&s.loadOrder(s.subtransactionid)})}return e(i,[{key:"loadOrder",value:function(t){var i=this;this.orderService.loadOrder(t).subscribe(function(t){i.isloadtransaction=!0,i.transaction=t})}},{key:"selectClientChange",value:function(t){this.transaction.externalsubjectid=t.externalsubjectid,this.transaction.vouchertypeid=t.vouchertypeid,this.transaction.businessname=t.client.subject,this.transaction.address=t.client.address,this.transaction.identitynumber=t.client.identitynumber,this.transaction.email=t.client.email,this.client=t.client}},{key:"selectPayChange",value:function(t){this.transaction.listfee=t,console.log(this.transaction)}},{key:"save",value:function(t){var i=this;t.preventDefault(),this.isSubmitted=!0,this.orderService.convertToInvoice(this.transaction).subscribe(function(t){i.transaction.subtransactionstateid=t.subtransactionstateid,i.transaction.subtransactionid=t.subtransactionid,i.subtransactionid=t.subtransactionid,console.log(t),i.showprintsale=!0,i.transaction.email!=i.client.email&&(i.client.email=i.transaction.email,i.client.startdate=i.datepipe.transform(i.client.startdate,"dd/MM/yyyy HH:mm:ss"),i.client.subjectrolid=1,null!=i.client.identitydocument&&(i.client.identitydocumentid=i.client.identitydocument.id,i.client.rateid=i.client.rate.id,i.client.subjectid=i.client.subject.id,i.client.subjecttypeid=i.client.subject.subjecttype.id,i.client.subjectrolcategoryid=i.client.subjectrolcategory.id),i.clientService.saveDirectClient(i.client).subscribe(function(t){alertify.success("Se Actualizo correctamente el correo")},function(t){console.log(t)}))})}},{key:"ngOnInit",value:function(){}}]),i}(),W.\u0275fac=function(t){return new(t||W)(d.Pb(u.a),d.Pb(p.a),d.Pb(h.a),d.Pb(r.a),d.Pb(c.f),d.Pb(b.a))},W.\u0275cmp=d.Jb({type:W,selectors:[["app-pay-convert-restaurant"]],decls:20,vars:17,consts:[[1,"container-mobile"],[1,"flex2-mobile"],["tabindex","0",1,"e-card",2,"margin-top","8px"],[1,"e-card-header","color-header-black"],["class","e-card-header-caption",4,"ngIf"],[1,"e-card-content"],[3,"identitynumber","vouchertypeid","subjectrolcategoryid","transactionclient"],[2,"padding-top","2px"],[3,"nzSm","nzXs"],["type","email",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","flex1-mobile",4,"ngIf"],[1,"pull-right","floating-button-left"],[1,"btn","btn-success","btn-lg","mr-4",2,"border-radius","30px",3,"disabled","click"],[1,"btn","btn-danger","btn-lg",2,"border-radius","30px",3,"routerLink"],[4,"ngIf"],[1,"e-card-header-caption"],[1,"e-card-title"],[1,"flex1-mobile"],[3,"subtransactionid","subtransactionstateid","totalpay","paysale"],[3,"subtransactionid","viewUsing","viewreturn","isVisible"]],template:function(t,i){1&t&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Vb(3,"div",3),d.Fc(4,L,4,1,"div",4),d.Ub(),d.Vb(5,"div"),d.Vb(6,"div",5),d.Vb(7,"app-select-person",6),d.fc("transactionclient",function(t){return i.selectClientChange(t)}),d.Ub(),d.Vb(8,"nz-form-item",7),d.Vb(9,"nz-form-label",8),d.Hc(10,"Correo"),d.Ub(),d.Vb(11,"nz-form-control",8),d.Vb(12,"input",9),d.fc("ngModelChange",function(t){return i.transaction.email=t}),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Fc(13,$,3,3,"div",10),d.Vb(14,"div",11),d.Vb(15,"button",12),d.fc("click",function(t){return i.save(t)}),d.Hc(16,"Guardar"),d.Ub(),d.Vb(17,"button",13),d.Hc(18,"Cancelar"),d.Ub(),d.Ub(),d.Ub(),d.Fc(19,K,2,4,"div",14)),2&t&&(d.Bb(4),d.oc("ngIf",0!=i.resouceid),d.Bb(3),d.oc("identitynumber",i.identitynumberdoc)("vouchertypeid",i.vouchertypeid)("subjectrolcategoryid",2),d.Bb(2),d.oc("nzSm",6)("nzXs",24),d.Bb(2),d.oc("nzSm",14)("nzXs",24),d.Bb(1),d.oc("ngModel",i.transaction.email)("ngModelOptions",d.rc(14,Z)),d.Bb(1),d.oc("ngIf",i.isloadtransaction),d.Bb(2),d.oc("disabled",i.isSubmitted),d.Bb(2),d.oc("routerLink",d.sc(15,tt,i.viewreturn)),d.Bb(2),d.oc("ngIf",i.showprintsale))},directives:[c.o,v.a,f.c,f.a,g.c,g.m,g.p,r.f,E.a,X.a],styles:[""]}),W),data:{title:"Pago y Generacion de Comprobante"}}],et=((q=function i(){t(this,i)}).\u0275mod=d.Nb({type:q}),q.\u0275inj=d.Mb({factory:function(t){return new(t||q)},imports:[[r.i.forChild(it)],r.i]}),q),nt=((Y=function i(){t(this,i)}).\u0275mod=d.Nb({type:Y}),Y.\u0275inj=d.Mb({factory:function(t){return new(t||Y)},imports:[[c.c,et]]}),Y)}}])}();