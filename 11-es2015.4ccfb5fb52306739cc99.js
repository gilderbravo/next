(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{GStY:function(t,i,e){"use strict";e.r(i),e.d(i,"QuatationModule",function(){return J});var n=e("ofXK"),a=e("tyNb"),o=e("PSD3"),c=e.n(o),s=e("fXoL"),r=e("0np6"),l=e("tk/3"),b=e("CFL1");let d=(()=>{class t{constructor(t,i,e){this.http=t,this.router=i,this.userService=e}listQuatations(t,i,e,n,a,o,c,s){return this.http.get(r.b+"transaction/quatation?"+`page=${t}&size=${i}&order=${e}&asc=${n}`+(a.length>0?"&filter="+a:"")+(o.toString().length>0?"&dateinit="+o:"")+(c.toString().length>0?"&dateend="+c:""),this.userService.getHeaderAuth())}deleteQuatation(t){this.http.get(r.b+"transaction/delete/"+t,this.userService.getHeaderAuth()).subscribe({next:t=>(c.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"Se Elimino la cotizacion "}),this.router.navigate(["/quatations"])),error:t=>console.error("There was an error!",t)})}saveQuatation(t){return this.http.post(r.b+"transaction/savequatation",t,this.userService.getHeaderAuth())}}return t.\u0275fac=function(i){return new(i||t)(s.cc(l.b),s.cc(a.e),s.cc(b.a))},t.\u0275prov=s.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=e("/67R"),h=e("NCuw"),p=e("3Pt+"),m=e("K7Ed"),f=e("LjSU"),g=e("Rm4T"),v=e("B+r4"),y=e("3+qR"),V=e("OzZK"),U=e("RwU8"),z=e("C2AL"),w=e("FwiY"),M=e("0lU3"),S=e("iAHN"),B=e("zAKX"),C=e("nkYO");const j=function(){return{standalone:!0}};function H(t,i){if(1&t){const t=s.Wb();s.Vb(0,"div",13),s.Vb(1,"div",32),s.Vb(2,"input",23),s.fc("ngModelChange",function(t){return i.$implicit.product=t}),s.Ub(),s.Ub(),s.Vb(3,"div",33),s.Vb(4,"input",34),s.fc("ngModelChange",function(t){return i.$implicit.amount=t})("blur",function(){return s.yc(t),s.ic().calculateTotal()}),s.Ub(),s.Ub(),s.Vb(5,"div",35),s.Vb(6,"input",36),s.fc("ngModelChange",function(t){return i.$implicit.unitpricesale=t})("blur",function(){return s.yc(t),s.ic().calculateTotal()}),s.Ub(),s.Ub(),s.Vb(7,"div",37),s.Hc(8),s.jc(9,"currency"),s.Ub(),s.Vb(10,"div",38),s.Vb(11,"button",39),s.fc("click",function(){s.yc(t);const e=i.$implicit,n=i.index;return s.ic().removeDetail(e,n)}),s.Qb(12,"i",40),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=i.$implicit;s.Bb(2),s.oc("ngModel",t.product)("ngModelOptions",s.rc(10,j)),s.Bb(2),s.oc("ngModel",t.amount)("ngModelOptions",s.rc(11,j)),s.Bb(2),s.oc("ngModel",t.unitpricesale)("ngModelOptions",s.rc(12,j)),s.Bb(2),s.Ic(s.lc(9,7,t.totalmoney,"S/"))}}function P(t,i){if(1&t&&s.Qb(0,"nz-option",41),2&t){const t=i.$implicit;s.oc("nzValue",t.employedid)("nzLabel",t.businessname)}}function k(t,i){if(1&t&&(s.Vb(0,"div"),s.Qb(1,"app-sale-ticket",42),s.Ub()),2&t){const t=s.ic();s.Bb(1),s.oc("transaction",t.transactionprint)("viewUsing","quatationview")("viewreturn","/quatations")("isVisible",t.showprintsale)}}const F=function(){return["dd/MM/yyyy"]},x=function(t){return["/clients","new",t]};let D=(()=>{class t{constructor(t,i,e,n,a,o,c,s,r,l,b){this.quatationService=t,this.datepipe=i,this.userService=e,this.clientService=n,this.saleService=a,this.formBuilder=o,this.businessobjectService=r,this.settingsService=l,this.i18n=b,this.employeds=[],this.load=!0,this.isSubmitted=!1,this.identitynumberdoc="",this.subjectrolid=1,this.configurationUser={},this.transactionprint={},this.viewpay=!1,this.showprintsale=!1,this.transaction={email:"",details:[],total:0,employedid:this.userService.employedid,dateinit:new Date},s.params.subscribe(t=>{this.id=t.id,this.identitynumberdoc=t.identitynumber,this.vouchertypeid=t.vouchertypeid,"new"!==this.id&&this.loadQuatations(this.id)})}ngOnInit(){this.validateFormGroup(),this.listEmployeds()}validateFormGroup(){this.form=this.formBuilder.group({})}get f(){return this.form.controls}save(){if(this.isSubmitted=!0,!this.form.invalid){if(this.transaction.dateinit&&this.stringDateformatDDMMYY(this.transaction.dateinit),this.transaction.details.length<=0)return alertify.error("No Tiene Detalles... "),void(this.isSubmitted=!1);this.quatationService.saveQuatation(this.transaction).subscribe({next:t=>{this.transaction.date=this.transaction.startdate,this.transaction.code=t.code,this.transaction.subject=this.transaction.businessname,this.transactionprint=this.transaction,c.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:"Se Guardo la Cotizacion"}),this.transaction.email!=this.client.email&&(this.client.email=this.transaction.email,this.client.startdate=this.datepipe.transform(this.client.startdate,"dd/MM/yyyy HH:mm:ss"),this.client.subjectrolid=1,null!=this.client.identitydocument&&(this.client.identitydocumentid=this.client.identitydocument.id,this.client.rateid=this.client.rate.id,this.client.subjectid=this.client.subject.id,this.client.subjecttypeid=this.client.subject.subjecttype.id,this.client.subjectrolcategoryid=this.client.subjectrolcategory.id),this.clientService.saveDirectClient(this.client).subscribe(t=>{alertify.success("Se Actualizo correctamente el correo")},t=>{console.log(t)})),this.showprintsale=!0},error:t=>console.error("There was an error!",t)})}}stringDateformatDDMMYY(t){this.transaction.startdate=this.datepipe.transform(t,"dd/MM/yyyy HH:mm:ss")}loadQuatations(t){this.saleService.loadSale(t).subscribe(t=>{this.transaction=t,this.transaction.dateinit=new Date(t.date),this.calculateTotal()})}selectClientChange(t){this.transaction.externalsubjectid=t.externalsubjectid,this.transaction.vouchertypeid=t.vouchertypeid,this.transaction.businessname=t.client.subject,this.transaction.address=t.client.address,this.transaction.identitynumber=t.client.identitynumber,this.transaction.email=t.client.email,this.client=t.client}removeDetail(t,i){t.id>0&&this.transaction.detailsremove.push(t),this.transaction.details.splice(i,1),this.calculateTotal()}onProductClick(t){if(1==this.userService.setting.includedigv){let i=!1;i=null!=this.transaction.details.find(i=>i.businessobjectdetailid==t.businessobjectdetailid),i?(this.transaction.details.forEach(i=>{i.businessobjectdetailid==t.businessobjectdetailid&&(i.amount=1*i.amount+1)}),this.calculateTotal()):this.addProductToDetails(t)}else this.addProductToDetails(t)}addProductToDetails(t){var i=Object.assign({},t);i.unitpricereal=i.unitpricesale;var e=new Date;new Date(e.getFullYear(),e.getMonth(),1),new Date(e.getFullYear(),e.getMonth()+1,0),this.transaction.details.push({comment:"",amount:1,unitmeasure:i.unitmeasure,product:i.nameconcat,stock:i.stock,businessobjectid:i.businessobjectid,businessobjectdetailid:i.businessobjectdetailid,valuedbusinessobjectid:i.valuedbusinessobjectid,unitpricesale:i.unitpricesale,unitpricereal:i.unitpricereal,totalmoney:i.unitpricesale,subtransactionid:0,subtransactionorderid:0,nameobjectrole:i.nameobjectrole,id:0,unitpricepurchase:i.unitprice,operationaffectedid:null!=i.operationaffectedid?i.operationaffectedid:10,minimalPrice:i.minimalPrice,convertautomatic:i.convertautomatic,stockTemp:i.stockTemp,code:i.code}),this.calculateTotal()}addProductToDetailsbasic(){var t=new Date;new Date(t.getFullYear(),t.getMonth(),1),new Date(t.getFullYear(),t.getMonth()+1,0),this.transaction.details.push({comment:"",amount:1,unitmeasure:"NIU",product:"",stock:0,businessobjectid:1,businessobjectdetailid:1,valuedbusinessobjectid:1,unitpricesale:0,unitpricereal:0,totalmoney:0,subtransactionid:0,subtransactionorderid:0,nameobjectrole:"Servicio",id:0,unitpricepurchase:0,operationaffectedid:30,minimalPrice:0,stockTemp:0,code:""}),this.calculateTotal()}calculateTotal(){this.transaction.neto=0,this.transaction.total=0;let t=0,i=0,e=this.transaction.details;for(let n=0;n<e.length;n++)e[n].totalmoney=e[n].amount*e[n].unitpricesale,i+=e[n].amount*e[n].unitpricesale,t+=e[n].totalmoney,e[n].total=e[n].totalmoney;this.transaction.neto=0==this.userService.setting.includedigv?t:t/(1*this.userService.igv.valor+1),this.transaction.igv=0==this.userService.setting.includedigv||0==this.transaction.applytax?0:this.transaction.neto*this.userService.igv.valor,this.transaction.total=this.transaction.neto+this.transaction.igv,this.transaction.total=Math.round(100*this.transaction.total)/100,this.transaction.neto=Math.round(100*this.transaction.neto)/100,this.transaction.igv=Math.round(100*this.transaction.igv)/100}listEmployeds(){this.load=!0,this.settingsService.listEployed().subscribe(t=>{this.employeds=t})}}return t.\u0275fac=function(i){return new(i||t)(s.Pb(d),s.Pb(n.f),s.Pb(b.a),s.Pb(u.a),s.Pb(h.a),s.Pb(p.d),s.Pb(a.e),s.Pb(a.a),s.Pb(m.a),s.Pb(f.a),s.Pb(g.e))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-quatation"]],decls:88,vars:61,consts:[[1,"container-mobile"],[1,"flex1-mobile"],[1,"card"],[3,"nzSpan"],[3,"product"],["nz-button","","nzType","primary","nzShape","circle",3,"click"],["nz-icon","","nzType","plus-circle","nzTheme","twotone"],[1,"wrapper-mobile"],[1,"table-mobile"],[1,"row-mobile","header-green"],[1,"cell-mobile"],[1,"cell-mobile","detail-amount"],["class","row-mobile",4,"ngFor","ngForOf"],[1,"row-mobile"],[1,"cell-mobile","texto","btn-primary"],[1,"flex2-mobile"],["nz-form","",3,"formGroup"],[1,"padding-add"],[3,"nzSm","nzXs"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzSpan"],[3,"nzFormat","ngModel","ngModelOptions","ngModelChange"],[1,"btn","btn-primary","btn-xs","waves-effect","waves-light","m-r-10",3,"routerLink"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[3,"identitynumber","subjectrolid","vouchertypeid","subjectrolcategoryid","transactionclient"],["type","email",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[1,"floating-button",2,"text-align","center"],["type","button",1,"btn","btn-success","waves-effect","waves-light","m-r-10",3,"disabled","click"],["routerLink","/contracts",1,"btn","btn-inverse","waves-effect","waves-light"],[4,"ngIf"],["data-title","Descripcion",1,"cell-mobile"],["data-title","Cantidad",1,"cell-mobile"],["type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","blur"],["data-title","Precio",1,"cell-mobile"],["data-plus-as-tab","true","type","text",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange","blur"],["data-title","Sub Total",1,"cell-mobile"],[1,"cell-mobile",2,"width","120px"],[1,"btn","btn-danger","btn-xs",3,"click"],[1,"fa","fa-trash"],[3,"nzValue","nzLabel"],[3,"transaction","viewUsing","viewreturn","isVisible"]],template:function(t,i){1&t&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Vb(3,"nz-form-item"),s.Vb(4,"nz-form-control",3),s.Vb(5,"app-list-product",4),s.fc("product",function(t){return i.onProductClick(t)}),s.Ub(),s.Ub(),s.Vb(6,"nz-form-control",3),s.Vb(7,"button",5),s.fc("click",function(){return i.addProductToDetailsbasic()}),s.Qb(8,"i",6),s.Ub(),s.Ub(),s.Ub(),s.Vb(9,"div",7),s.Vb(10,"div",8),s.Vb(11,"div",9),s.Vb(12,"div",10),s.Hc(13,"Descripcion"),s.Ub(),s.Vb(14,"div",11),s.Hc(15,"Cantidad"),s.Ub(),s.Vb(16,"div",11),s.Hc(17,"Precio"),s.Ub(),s.Vb(18,"div",10),s.Hc(19,"Sub Total"),s.Ub(),s.Vb(20,"div",10),s.Hc(21,"Accion"),s.Ub(),s.Ub(),s.Fc(22,H,13,13,"div",12),s.Vb(23,"div",13),s.Qb(24,"div",10),s.Qb(25,"div",10),s.Qb(26,"div",10),s.Vb(27,"div",10),s.Hc(28," SubTotal"),s.Ub(),s.Vb(29,"div",10),s.Hc(30),s.jc(31,"currency"),s.Ub(),s.Ub(),s.Vb(32,"div",13),s.Qb(33,"div",10),s.Qb(34,"div",10),s.Qb(35,"div",10),s.Vb(36,"div",10),s.Hc(37," IGV "),s.Ub(),s.Vb(38,"div",10),s.Hc(39),s.jc(40,"currency"),s.Ub(),s.Ub(),s.Vb(41,"div",13),s.Qb(42,"div",10),s.Qb(43,"div",10),s.Qb(44,"div",10),s.Vb(45,"div",14),s.Hc(46," TOTAL"),s.Ub(),s.Vb(47,"div",14),s.Hc(48),s.jc(49,"currency"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(50,"div",15),s.Vb(51,"form",16),s.Vb(52,"div",2),s.Vb(53,"nz-form-item",17),s.Vb(54,"nz-form-label",18),s.Hc(55,"Fecha"),s.Ub(),s.Vb(56,"nz-form-control",18),s.Vb(57,"div",19),s.Vb(58,"div",20),s.Vb(59,"nz-date-picker",21),s.fc("ngModelChange",function(t){return i.transaction.dateinit=t}),s.Ub(),s.Ub(),s.Vb(60,"div",20),s.Vb(61,"button",22),s.Hc(62,"Nuevo Cliente"),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(63,"nz-form-item",17),s.Vb(64,"nz-form-label",18),s.Hc(65,"Opcional"),s.Ub(),s.Vb(66,"nz-form-control",18),s.Vb(67,"input",23),s.fc("ngModelChange",function(t){return i.transaction.subject=t}),s.Ub(),s.Ub(),s.Ub(),s.Vb(68,"nz-form-item",17),s.Vb(69,"nz-form-control",18),s.Vb(70,"app-select-person",24),s.fc("transactionclient",function(t){return i.selectClientChange(t)}),s.Ub(),s.Ub(),s.Ub(),s.Vb(71,"nz-form-item",17),s.Vb(72,"nz-form-label",18),s.Hc(73,"Correo"),s.Ub(),s.Vb(74,"nz-form-control",18),s.Vb(75,"input",25),s.fc("ngModelChange",function(t){return i.transaction.email=t}),s.Ub(),s.Ub(),s.Ub(),s.Vb(76,"nz-form-item",17),s.Vb(77,"nz-form-label",18),s.Hc(78,"Vendedor"),s.Ub(),s.Vb(79,"nz-form-control",18),s.Vb(80,"nz-select",26),s.fc("ngModelChange",function(t){return i.transaction.employedid=t}),s.Fc(81,P,1,2,"nz-option",27),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(82,"div",28),s.Vb(83,"button",29),s.fc("click",function(){return i.save()}),s.Hc(84,"Guardar"),s.Ub(),s.Vb(85,"button",30),s.Hc(86,"Salir"),s.Ub(),s.Ub(),s.Fc(87,k,2,4,"div",31),s.Ub()),2&t&&(s.Bb(4),s.oc("nzSpan",23),s.Bb(2),s.oc("nzSpan",1),s.Bb(16),s.oc("ngForOf",i.transaction.details),s.Bb(8),s.Jc(" ",s.lc(31,45,i.transaction.neto,"S/"),""),s.Bb(9),s.Jc(" ",s.lc(40,48,i.transaction.igv,"S/")," "),s.Bb(9),s.Jc(" ",s.lc(49,51,i.transaction.total,"S/"),""),s.Bb(3),s.oc("formGroup",i.form),s.Bb(3),s.oc("nzSm",6)("nzXs",24),s.Bb(2),s.oc("nzSm",14)("nzXs",24),s.Bb(1),s.oc("nzGutter",8),s.Bb(1),s.oc("nzSpan",16),s.Bb(1),s.oc("nzFormat",s.rc(54,F))("ngModel",i.transaction.dateinit)("ngModelOptions",s.rc(55,j)),s.Bb(1),s.oc("nzSpan",6),s.Bb(1),s.oc("routerLink",s.sc(56,x,"quatations/"+i.id+"/"+i.identitynumberdoc+"/"+i.vouchertypeid)),s.Bb(3),s.oc("nzSm",6)("nzXs",24),s.Bb(2),s.oc("nzSm",14)("nzXs",24),s.Bb(1),s.oc("ngModel",i.transaction.subject)("ngModelOptions",s.rc(58,j)),s.Bb(2),s.oc("nzSm",24)("nzXs",24),s.Bb(1),s.oc("identitynumber",i.identitynumberdoc)("subjectrolid",i.subjectrolid)("vouchertypeid",i.vouchertypeid)("subjectrolcategoryid",2),s.Bb(2),s.oc("nzSm",6)("nzXs",24),s.Bb(2),s.oc("nzSm",14)("nzXs",24),s.Bb(1),s.oc("ngModel",i.transaction.email)("ngModelOptions",s.rc(59,j)),s.Bb(2),s.oc("nzSm",6)("nzXs",24),s.Bb(2),s.oc("nzSm",14)("nzXs",24),s.Bb(1),s.oc("ngModel",i.transaction.employedid)("ngModelOptions",s.rc(60,j)),s.Bb(1),s.oc("ngForOf",i.employeds),s.Bb(2),s.oc("disabled",i.isSubmitted),s.Bb(4),s.oc("ngIf",i.showprintsale))},directives:[v.c,v.a,y.a,V.a,U.a,z.a,w.b,n.n,p.x,p.n,p.h,M.a,p.m,p.p,a.f,p.c,S.a,B.b,n.o,B.a,C.a],pipes:[n.d],encapsulation:2}),t})();var I=e("1kSV"),T=e("ed8r");function Q(t,i){1&t&&(s.Vb(0,"div",2),s.Vb(1,"div",3),s.Vb(2,"div",4),s.Vb(3,"strong"),s.Hc(4,"Cargando"),s.Ub(),s.Qb(5,"br"),s.Qb(6,"i",5),s.Qb(7,"br"),s.Vb(8,"span"),s.Hc(9,"Por Favor Espere"),s.Ub(),s.Ub(),s.Ub(),s.Ub())}function O(t,i){1&t&&(s.Vb(0,"div",2),s.Vb(1,"div",3),s.Vb(2,"div",6),s.Vb(3,"span"),s.Hc(4,"Caja Cerrada. "),s.Ub(),s.Vb(5,"span"),s.Hc(6,"Para generar un comprobante debe aperturar su caja"),s.Ub(),s.Ub(),s.Ub(),s.Ub())}const L=function(t,i,e){return[t,i,e]};function E(t,i){if(1&t&&(s.Vb(0,"button",38),s.Qb(1,"i",39),s.Ub()),2&t){const t=s.ic().$implicit;s.oc("routerLink",s.uc(1,L,t.subtransactionid,t.identitynumber,t.vouchertypeid))}}function q(t,i){if(1&t){const t=s.Wb();s.Vb(0,"button",40),s.fc("click",function(){s.yc(t);const i=s.ic().$implicit;return s.ic(2).prepareDelete(i)}),s.Qb(1,"i",41),s.Ub()}}function X(t,i){if(1&t&&(s.Vb(0,"div",28),s.Vb(1,"div",29),s.Fc(2,E,2,5,"button",30),s.Fc(3,q,2,0,"button",31),s.Ub(),s.Vb(4,"div",32),s.Hc(5),s.Ub(),s.Vb(6,"div",33),s.Hc(7),s.Ub(),s.Vb(8,"div",34),s.Hc(9),s.Ub(),s.Vb(10,"div",35),s.Hc(11),s.Ub(),s.Vb(12,"div",36),s.Hc(13),s.jc(14,"currency"),s.Ub(),s.Vb(15,"div",37),s.Hc(16),s.Ub(),s.Ub()),2&t){const t=i.$implicit,e=s.ic(2);s.Bb(2),s.oc("ngIf",e.salesService.statusCashbox),s.Bb(1),s.oc("ngIf",e.salesService.statusCashbox),s.Bb(2),s.Ic(t.code),s.Bb(2),s.Ic(t.vouchertype),s.Bb(2),s.Ic(t.date),s.Bb(2),s.Ic(""!=t.subject?t.subject:t.name),s.Bb(2),s.Ic(s.lc(14,8,t.total,"S/")),s.Bb(3),s.Ic(t.states)}}function Y(t,i){if(1&t){const t=s.Wb();s.Vb(0,"ngb-pagination",42),s.fc("pageChange",function(i){return s.yc(t),s.ic(2).page=i})("pageChange",function(i){return s.yc(t),s.ic(2).loadPage(i)}),s.Ub()}if(2&t){const t=s.ic(2);s.oc("collectionSize",t.totalItems)("page",t.page)}}const $=function(){return["new","11111111","4"]};function A(t,i){if(1&t){const t=s.Wb();s.Vb(0,"div"),s.Vb(1,"div",7),s.Vb(2,"div",8),s.Vb(3,"label",9),s.Hc(4,"Fecha Inicio"),s.Ub(),s.Vb(5,"div",10),s.Vb(6,"ejs-datetimepicker",11),s.fc("ngModelChange",function(i){return s.yc(t),s.ic().dateinit=i}),s.Ub(),s.Ub(),s.Vb(7,"label",12),s.Hc(8,"Fecha Final"),s.Ub(),s.Vb(9,"div",10),s.Vb(10,"ejs-datetimepicker",13),s.fc("ngModelChange",function(i){return s.yc(t),s.ic().dateend=i}),s.Ub(),s.Ub(),s.Vb(11,"div",14),s.Vb(12,"button",15),s.Qb(13,"i",16),s.Hc(14," Nuevo Cotizacion "),s.Ub(),s.Ub(),s.Ub(),s.Vb(15,"div",8),s.Vb(16,"input",17,18),s.fc("keyup.enter",function(){s.yc(t);const i=s.xc(17);return s.ic().search(i.value)}),s.Ub(),s.Vb(18,"div",12),s.Vb(19,"button",19),s.fc("click",function(){s.yc(t);const i=s.xc(17);return s.ic().search(i.value)}),s.Hc(20,"Buscar"),s.Ub(),s.Ub(),s.Ub(),s.Vb(21,"h3",20),s.Hc(22,"Cotizaciones Registradas ("),s.Vb(23,"small"),s.Hc(24),s.Ub(),s.Hc(25,")"),s.Ub(),s.Vb(26,"div",21),s.Vb(27,"div",22),s.Vb(28,"div",23),s.Vb(29,"div",24),s.Hc(30,"Accion"),s.Ub(),s.Vb(31,"div",24),s.Hc(32,"Documento"),s.Ub(),s.Vb(33,"div",24),s.Hc(34,"Tipo"),s.Ub(),s.Vb(35,"div",24),s.Hc(36,"Fecha"),s.Ub(),s.Vb(37,"div",24),s.Hc(38,"Cliente"),s.Ub(),s.Vb(39,"div",24),s.Hc(40,"Total"),s.Ub(),s.Vb(41,"div",24),s.Hc(42,"Estado"),s.Ub(),s.Ub(),s.Fc(43,X,17,11,"div",25),s.Ub(),s.Ub(),s.Vb(44,"div",26),s.Fc(45,Y,1,2,"ngb-pagination",27),s.Ub(),s.Ub(),s.Ub()}if(2&t){const t=s.ic();s.Bb(6),s.oc("ngModel",t.dateinit),s.Bb(4),s.oc("ngModel",t.dateend),s.Bb(2),s.oc("routerLink",s.rc(6,$)),s.Bb(12),s.Ic(t.totalItems),s.Bb(19),s.oc("ngForOf",t.transactions),s.Bb(2),s.oc("ngIf",t.showPagination)}}const G=[{path:"",component:(()=>{class t{constructor(t,i,e,n,a){this.ngbPaginationConfig=t,this.salesService=i,this.quatationService=e,this.datepipe=n,this.userService=a,this.today=new Date,this.dateinit=new Date(this.today.getFullYear(),this.today.getMonth()),this.dateend=new Date(this.today.getFullYear(),this.today.getMonth()+1,0),this.totalItems=0,this.page=1,this.previousPage=1,this.showPagination=!0,this.size=10,this.order="id",this.filter="",this.asc=!0,this.load=!0,this.ngbPaginationConfig.boundaryLinks=!0}ngOnInit(){this.list(this.page-1)}list(t){this.load=!0,this.quatationService.listQuatations(t,this.size,this.order,this.asc,this.filter,this.datepipe.transform(this.dateinit,"dd/MM/yyyy"),this.datepipe.transform(this.dateend,"dd/MM/yyyy"),this.userService.subsidiaryid).subscribe(t=>{this.totalItems=t.totalElements,this.showPagination=!0,this.transactions=t.content,this.load=!1})}loadPage(t){t!==this.previousPage&&(this.previousPage=t,this.list(this.page-1))}search(t){this.filter=t,this.previousPage=1,this.page=1,this.filter.length<=0&&(this.filter=""),this.list(0)}prepareDelete(t){swal({title:"Esta Seguro?",text:"Esta a punto de Borrar la cotizacion "+t.code,icon:"warning",buttons:!0,dangerMode:!0}).then(i=>{i&&(this.quatationService.deleteQuatation(t.subtransactionid),this.previousPage=1,this.page=1,this.list(0))})}}return t.\u0275fac=function(i){return new(i||t)(s.Pb(I.c),s.Pb(h.a),s.Pb(d),s.Pb(n.f),s.Pb(b.a))},t.\u0275cmp=s.Jb({type:t,selectors:[["app-quatations"]],decls:3,vars:3,consts:[["class","row animated fadeIn",4,"ngIf"],[4,"ngIf"],[1,"row","animated","fadeIn"],[1,"col-sm-12"],[1,"alert","alert-warning","text-center"],[1,"fa","fa-refresh","fa-spin","fa-2x"],[1,"alert","alert-danger","text-center"],[1,"card",2,"padding","2px"],[1,"col-md-12","row"],["col-md-2",""],[1,"col-md-3","form-group"],["id","dateinit","placeholder","Select a datetime ","format","dd/MM/yyyy",3,"ngModel","ngModelChange"],[1,"col-md-2"],["id","dateend","placeholder","Select a datetime ","format","dd/MM/yyyy",3,"ngModel","ngModelChange"],[1,"text-right","col-md-2"],["type","button",1,"btn","waves-effect","waves-light","btn-rounded","btn-primary",3,"routerLink"],[1,"fa","fa-plus"],["type","text","placeholder","Buscar",1,"col-md-9","form-control",3,"keyup.enter"],["input",""],["type","submit",1,"btn","btn-success","waves-effect","waves-light","m-r-10",3,"click"],[1,"card-title"],[1,"wrapper-mobile"],[1,"table-mobile"],[1,"row-mobile","header-mobile"],[1,"cell-mobile"],["class","row-mobile",4,"ngFor","ngForOf"],[2,"position","relative","left","30%"],[3,"collectionSize","page","pageChange",4,"ngIf"],[1,"row-mobile"],[1,"cell-mobile",2,"width","180px"],["title","Editar cotizacion","class","btn btn-primary btn-xs waves-effect waves-light m-r-10",3,"routerLink",4,"ngIf"],["title","Eliminar Cotizacion","class","btn btn-danger btn-xs waves-effect waves-light m-r-10",3,"click",4,"ngIf"],["data-title","Documento",1,"cell-mobile"],["data-title","Tipo",1,"cell-mobile"],["data-title","Fecha",1,"cell-mobile"],["data-title","Cliente",1,"cell-mobile"],["data-title","Total",1,"cell-mobile"],["data-title","Estado",1,"cell-mobile"],["title","Editar cotizacion",1,"btn","btn-primary","btn-xs","waves-effect","waves-light","m-r-10",3,"routerLink"],[1,"fa","fa-edit"],["title","Eliminar Cotizacion",1,"btn","btn-danger","btn-xs","waves-effect","waves-light","m-r-10",3,"click"],[1,"fa","fa-trash"],[3,"collectionSize","page","pageChange"]],template:function(t,i){1&t&&(s.Fc(0,Q,10,0,"div",0),s.Fc(1,O,7,0,"div",0),s.Fc(2,A,46,7,"div",1)),2&t&&(s.oc("ngIf",i.load),s.Bb(1),s.oc("ngIf",0==i.salesService.statusCashbox),s.Bb(1),s.oc("ngIf",!i.load))},directives:[n.o,T.a,p.m,p.p,a.f,n.n,I.b],pipes:[n.d],styles:[""]}),t})(),data:{title:"Listado Cotizaciones"}},{path:":id/:identitynumber/:vouchertypeid",component:D,data:{title:"Cotizacion"}}];let N=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(i){return new(i||t)},imports:[[a.i.forChild(G)],a.i]}),t})(),J=(()=>{class t{}return t.\u0275mod=s.Nb({type:t}),t.\u0275inj=s.Mb({factory:function(i){return new(i||t)},imports:[[n.c,N]]}),t})()}}]);